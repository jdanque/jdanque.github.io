!function t(e,r,n){function i(s,a){if(!r[s]){if(!e[s]){var u="function"==typeof require&&require;if(!a&&u)return u(s,!0);if(o)return o(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var l=r[s]={exports:{}};e[s][0].call(l.exports,function(t){var r=e[s][1][t];return i(r||t)},l,l.exports,t,e,r,n)}return r[s].exports}for(var o="function"==typeof require&&require,s=0;s<n.length;s++)i(n[s]);return i}({1:[function(t,e,r){var n=t("lodash.has"),i=t("./util/warn"),o=t("bluebird"),s={},a={},u=0;setInterval(function(){var t=Object.keys(s),e=Date.now();t.forEach(function(t){s[t].expires<e&&delete s[t]})},1e3),e.exports={callback:function(t,e,r){var u=e.callback,c=e.action,l=e.options;return o.try(function(){switch(c){case"run":if(n(a,u))return a[u].call(null,t,l);throw i("Attempted to run callback that does not exist or was not retained"),t.NotHandled("callback does not exist or was not retained");case"retain":if(n(s,u))return a[u]=s[u].fx,delete s[u],u;throw i("Attempted to retain callback that does not exist"),t.NotHandled("callback can no longer be retained");case"release":if(n(a,u))return delete a[u],null;throw i("Attempted to release callback that is not retained"),t.NotHandled("callback can no longer be released");default:throw i("Attempted an unknown callback action"),t.NotHandled("unknown callback action")}}).then(r)},serialize:function(t){var e="cb"+(u+=1);return s[e]={fx:t,expires:Date.now()+1e4},{_callback:e}}}},{"./util/warn":20,bluebird:22,"lodash.has":24}],2:[function(t,e,r){!function(){this.TrelloPowerUp=t("./index")}()},{"./index":8}],3:[function(t,e,r){!function(t){t.matches=t.matches||t.mozMatchesSelector||t.msMatchesSelector||t.oMatchesSelector||t.webkitMatchesSelector,t.closest=t.closest||function(t){for(var e=this;e&&!e.matches(t);)e=e.parentElement;return e}}(Element.prototype)},{}],4:[function(t,e,r){var n=t("./util/convert"),i=t("./util/simple-crypto"),o=t("./i18n-error"),s=t("lodash.has"),a=t("./process-result"),u=t("./util/relative-url"),c=t("@trello/post-message-io"),l=t("bluebird"),f=t("./util/safe"),h=t("./util/validate"),p=t("./util/warn"),d=t("xtend"),_={};_.getContext=function(){return this.args[0].context},_.isMemberSignedIn=function(){var t=this.getContext();return null!=t&&"notLoggedIn"!==t.member&&null!=t.member},_.memberCanWriteToModel=function(t){if(!this.isMemberSignedIn())return!1;var e=["board","card","organization"];if("string"!=typeof t||-1===e.indexOf(t))throw new Error("modelType must be one of: board, card, organization");var r=this.getContext();return null!=r&&null!=r.permissions&&"write"===r.permissions[t]},_.requestWithContext=function(t,e){var r=e||{};return r.context=this.getContext(),this.request(t,a(r))},_.getAll=function(){return this.requestWithContext("data").then(function(t){var e={};return Object.keys(t).forEach(function(r){e[r]={},Object.keys(t[r]).forEach(function(n){try{e[r][n]=JSON.parse(t[r][n])}catch(t){e[r][n]={}}})}),e})},_.get=function(t,e,r,n){var i={};if((h.isId(t)||h.isShortLink(t))&&(i.idCard=t,t="card"),!h.isAllowedVisibilty(e))throw new Error("Invalid value for visibility.");if(!h.isAllowedScope(t))throw new Error("Invalid value for scope.");return this.requestWithContext("data",i).then(function(i){var o={};if(i&&s(i,t)&&s(i[t],e))try{o=JSON.parse(i[t][e])}catch(t){}return null==r?o||n:null!=o&&s(o,r)?o[r]:n})},_.set=function(t,e,r,n){var i={scope:t,visibility:e},o=this;if(!h.isAllowedVisibilty(e))throw new Error("Invalid value for visibility.");if((h.isId(t)||h.isShortLink(t))&&(i.idCard=t,i.scope="card"),!h.isAllowedScope(i.scope))throw new Error("Invalid value for scope.");return this.get(t,e).then(function(t){var e=t||{};return"object"==typeof r?Object.keys(r).forEach(function(t){e[t]=r[t]}):e[r]=n,i.data=JSON.stringify(e),o.requestWithContext("set",i)})},_.remove=function(t,e,r){var n={scope:t,visibility:e},i=r,o=this;if((h.isId(t)||h.isShortLink(t))&&(n.idCard=t,n.scope="card"),Array.isArray(i)||(i=[r]),i.some(function(t){return"string"!=typeof t}))return p("t.remove function takes either a single string or an array of strings for which keys to remove"),null;if(!h.isAllowedScope(n.scope))throw new Error("Invalid value for scope.");if(!h.isAllowedVisibilty(e))throw new Error("Invalid value for visibility.");return this.get(t,e).then(function(t){var e=t||{};return i.forEach(function(t){delete e[t]}),n.data=JSON.stringify(e),o.requestWithContext("set",n)})},_.safe=f,_.arg=function(t,e){var r=this.args[1];return r&&"object"==typeof r&&s(r,t)?r[t]:e},_.signUrl=function(t,e){var r=this.getContext();return[t,encodeURIComponent(JSON.stringify({secret:this.secret,context:r,locale:window.locale,args:e}))].join("#")},_.navigate=function(t){return t&&"object"==typeof t&&"string"==typeof t.url?this.requestWithContext("navigate",t):l.reject(new Error("Invalid or missing url provided in options object"))},_.showCard=function(t){return t&&"string"==typeof t?this.requestWithContext("showCard",{idCard:t}):l.reject(new Error("Invalid idCard provided"))},_.popup=function(t){var e={title:t.title,callback:t.callback};if(t.url)e.content={type:"iframe",url:this.signUrl(u(t.url),t.args),width:t.width,height:t.height};else if(t.items){var r;r=Array.isArray(t.items)||"function"==typeof t.items?t.items:Object.keys(t.items).map(function(e){var r=t.items[e];return"function"==typeof r&&(r={callback:r}),d({text:e},r)}),e.content={type:"list",items:r,search:t.search}}return this.requestWithContext("popup",e)},_.overlay=function(t){var e={};return t.url&&(e.content={type:"iframe",url:this.signUrl(u(t.url),t.args)}),this.requestWithContext("overlay",e)},_.boardBar=function(t){var e={};return t.url&&(e.content={customClose:t.customClose||!1,type:"iframe",url:this.signUrl(u(t.url),t.args),height:t.height}),this.requestWithContext("board-bar",e)},_.hide=function(){return p("hide() handler has been deprecated. Please use closePopup()"),this.requestWithContext("close-popup")},_.closePopup=function(){return this.requestWithContext("close-popup")},_.back=function(){return this.requestWithContext("pop-popup")},_.hideOverlay=function(){return p("hideOverlay() handler has been deprecated. Please use closeOverlay()"),this.requestWithContext("close-overlay")},_.closeOverlay=function(){return this.requestWithContext("close-overlay")},_.hideBoardBar=function(){return p("hideBoardBar() handler has been deprecated. Please use closeBoardBar()"),this.requestWithContext("close-board-bar")},_.closeBoardBar=function(){return this.requestWithContext("close-board-bar")},_.sizeTo=function(t){var e=document.querySelector(t);return e?(e.style.overflow="hidden",this.requestWithContext("resize",{height:Math.ceil(Math.max(e.scrollHeight,e.getBoundingClientRect().height))})):l.reject(new Error("no elements matched"))},_.localizeKey=function(t,e){if(window.localizer&&"function"==typeof window.localizer.localize)return window.localizer.localize(t,e);throw new o.LocalizerNotFound("No localizer available for localization.")},_.localizeKeys=function(t){if(!t)return[];var e=this;return t.map(function(t){if("string"==typeof t)return e.localizeKey(t);if(Array.isArray(t))return e.localizeKey(t[0],t[1]);throw new o.UnsupportedKeyType("localizeKeys doesn't recognize the supplied key type: "+typeof t)})},_.localizeNode=function(t){for(var e=t.querySelectorAll("[data-i18n-id],[data-i18n-attrs]"),r=0,n=e.length;r<n;r+=1){var i={},s=e[r];if(s.dataset.i18nArgs)try{i=JSON.parse(s.dataset.i18nArgs)}catch(t){throw new o.UnableToParseArgs("Error parsing args. Error: "+t.message)}if(s.dataset.i18nId&&(s.textContent=this.localizeKey(s.dataset.i18nId,i)),s.dataset.i18nAttrs){var a;try{a=JSON.parse(s.dataset.i18nAttrs)}catch(t){throw new o.UnableToParseAttrs("Error parsing attrs. Error: "+t.message)}a&&a.placeholder&&(s.placeholder=this.localizeKey(a.placeholder,i))}}},_.card=function(){return this.requestWithContext("card",{fields:arguments})},_.cards=function(){return this.requestWithContext("cards",{fields:arguments})},_.list=function(){return this.requestWithContext("list",{fields:arguments})},_.lists=function(){return this.requestWithContext("lists",{fields:arguments})},_.member=function(){return this.requestWithContext("member",{fields:arguments})},_.board=function(){return this.requestWithContext("board",{fields:arguments})},_.organization=function(){return this.requestWithContext("organization",{fields:arguments})},_.attach=function(t){if(!this.memberCanWriteToModel("card"))throw new Error("User lacks write permission on card.");return this.requestWithContext("attach-to-card",t)},_.requestToken=function(t){if(!this.isMemberSignedIn())throw new Error("No active member in context.");return this.requestWithContext("request-token",t)},_.authorize=function(t,e){var r,n=c.randomId(),i=e||{};if("string"==typeof t)r=t;else{if("function"!=typeof t)throw p("authorize requires a url or function that takes a secret and returns a url"),new Error("Invalid arguments passed to authorize");r=t(n)}var o=function(){return!0};i.validToken&&"function"==typeof i.validToken&&(o=i.validToken);var s=i.width||800,a=i.height||600,u=["width=",s,",height=",a,",left=",window.screenX+Math.floor((window.outerWidth-s)/2),",top=",window.screenY+Math.floor((window.outerHeight-a)/2)].join(""),f=function(t){var e=function(r){"token"===r.key&&r.newValue&&o(r.newValue)&&(localStorage.removeItem("token"),window.removeEventListener("storage",e,!1),delete window.authorize,t(r.newValue))};return e};return new l(function(e){window.addEventListener("storage",f(e),!1),"function"==typeof t?new c({local:window,remote:window.open(r,"authorize",u),targetOrigin:i.targetOrigin||"*",secret:n,handlers:{value:function(t,r){r&&r.token&&o(r.token)&&(this.stop(),e(r.token))}}}):(window.authorize=function(t){t&&o(t)&&(delete window.authorize,e(t))},window.open(r,"authorize",u))})},_.storeSecret=function(t,e){if(!this.isMemberSignedIn())throw new Error("No active member in context.");var r=this.getContext().member+":"+t,o=this;return i.sha256Digest(r).then(function(t){return o.get("member","private","aescbc").then(function(t){return t||i.generateAESCBCKey().then(function(t){return i.exportAESCBCKeyToRaw(t)}).then(function(t){return o.set("member","private","aescbc",t).then(function(){return t})})}).then(function(r){return i.importAESCBCKeyFromRaw(r).then(function(r){var o=i.generateInitVector();return i.encryptSecret(o,r,e).then(function(e){var r=n.bytesToHexString(o)+";"+e;return window.localStorage.setItem(t,r),{key:t,value:r}})})})})},_.loadSecret=function(t){if(!this.isMemberSignedIn())throw new Error("No active member in context.");var e=this,r=this.getContext().member+":"+t;return i.sha256Digest(r).then(function(t){return window.localStorage.getItem(t)}).then(function(t){return t?e.get("member","private","aescbc").then(function(e){return e?i.importAESCBCKeyFromRaw(e).then(function(e){var r=t.substring(0,t.indexOf(";")),o=t.substring(t.indexOf(";")+1),s=n.hexStringToUint8Array(r);return i.decryptSecret(s,e,o)}):null}):null})},_.notifyParent=function(t,e){var r=e||{};window.parent.postMessage(t,r.targetOrigin||"*")},e.exports=_},{"./i18n-error":5,"./process-result":12,"./util/convert":14,"./util/relative-url":16,"./util/safe":17,"./util/simple-crypto":18,"./util/validate":19,"./util/warn":20,"@trello/post-message-io":21,bluebird:22,"lodash.has":24,xtend:27}],5:[function(t,e,r){var n=t("./util/make-error-enum");e.exports=n("i18n",["ArgNotFound","InvalidResourceUrl","KeyNotFound","LoadLocalizerNotAFunction","LocaleNotFound","LocaleNotSpecified","LocalizerNotFound","MissingDefaultLocale","MissingResourceUrl","MissingSupportedLocales","UnableToParseArgs","UnableToParseAttrs","Unknown","UnsupportedKeyType"])},{"./util/make-error-enum":15}],6:[function(t,e,r){var n,i,o=t("./i18n-error"),s=t("bluebird"),a="",u=function(t,e){if(t.indexOf("{locale}")<0)throw new o.InvalidResourceUrl("ResourceUrl must specify where to place locale with {locale}");return t.replace("{locale}",e)},c=function(t,e,r){return r.indexOf(t)>-1?t:t.indexOf("-")>-1?c(t.split("-")[0],e,r):e},l=function(t,e){var r=this;if(r.resourceDictionary[t]){var n=r.resourceDictionary[t];if(e){for(var i="",s=/\{(\w+?)\}/gi,a=s.exec(n),u=0;a;){if(a.index>u&&(i+=n.substring(u,a.index)),!e[a[1]])throw new o.ArgNotFound("Arg: "+a[1]);i+=e[a[1]],u=a.index+a[0].length,a=s.exec(n)}return i+=n.substring(u)}return n}throw new o.KeyNotFound("Key: "+t)};e.exports={loadLocalizer:function(t,e,r,f){return s.try(function(){var h;return(h=t?c(t,e,r):e)===a&&i?i:(n||(n=new s(function(t,e){var r=new XMLHttpRequest;r.open("GET",u(f,h),!0),r.onload=function(){try{if(200===r.status){var n=JSON.parse(r.responseText);return i={resourceDictionary:n,localize:l},a=h,t(i)}return e(404===r.status?new o.LocaleNotFound(h+" not found."):new o.Unknown("Unable to load locale, status: "+r.status))}catch(t){return e(new o.Unknown(t.message))}},r.send()})),n)})}}},{"./i18n-error":5,bluebird:22}],7:[function(t,e,r){var n=t("./util/arg"),i=t("./callback-cache"),o=t("lodash.has"),s=t("./host-handlers"),a=t("./initialize-i18n"),u=t("./initialize-io"),c=t("@trello/post-message-io"),l=t("./process-result"),f=t("xtend"),h=function(t){this.io=null,this.args=[{context:n("context"),secret:n("secret")}].concat(n("args")),this.secret=n("secret"),window.locale=n("locale"),this.options=t};h.prototype.connect=function(){var t={callback:function(t,e){return i.callback.call(this,t,e,l)}};this.io=u(t,f(this.options,{secret:n("secret"),hostHandlers:s}))},h.prototype.request=function(t,e){return this.io.request(t,e)},h.prototype.render=function(t){var e=this;window.addEventListener("message",function(r){r.source===window.parent&&"render"===r.data&&a(window.locale,e.options).then(function(){t()})},!1)},h.prototype.NotHandled=c.NotHandled;for(var p in s)o(s,p)&&(h.prototype[p]=s[p]);e.exports=h},{"./callback-cache":1,"./host-handlers":4,"./initialize-i18n":9,"./initialize-io":10,"./process-result":12,"./util/arg":13,"@trello/post-message-io":21,"lodash.has":24,xtend:27}],8:[function(t,e,r){var n=t("./util/convert"),i=t("./util/simple-crypto"),o=t("./initialize-i18n"),s=t("./util/make-error-enum"),a=t("@trello/post-message-io"),u=t("bluebird"),c=t("./util/relative-url"),l=t("./plugin"),f=t("./iframe");t("./compatibility/closest"),e.exports={initialize:function(t,e){new l(t,e).connect()},iframe:function(t){var e=new f(t);return e.connect(),e},PostMessageIO:a,Promise:u,util:{convert:n,crypto:i,initLocalizer:o,makeErrorEnum:s,relativeUrl:c}}},{"./compatibility/closest":3,"./iframe":7,"./initialize-i18n":9,"./plugin":11,"./util/convert":14,"./util/make-error-enum":15,"./util/relative-url":16,"./util/simple-crypto":18,"@trello/post-message-io":21,bluebird:22}],9:[function(t,e,r){var n=t("./i18n"),i=t("./i18n-error"),o=t("bluebird");e.exports=function(t,e){var r=e||{},s="";if(!t)return s="Unable to load a localizer without a locale",o.reject(new i.LocaleNotSpecified(s));if(window.localizer)return o.resolve();if(r.localizer)window.localizer=r.localizer;else{if(r.loadLocalizer)return"function"==typeof r.loadLocalizer?o.resolve(r.loadLocalizer(t)).then(function(t){return window.localizer=t,o.resolve()}):(s="Specified loadLocalizer must be a function that returns a localizer or a Promise resolving to a localizer",o.reject(new i.LoadLocalizerNotAFunction(s)));if(r.localization){var a=r.localization;return a.defaultLocale?a.supportedLocales?a.resourceUrl?n.loadLocalizer(t,a.defaultLocale,a.supportedLocales,a.resourceUrl).then(function(t){return window.localizer=t,o.resolve()}):o.reject(new i.MissingResourceUrl("Missing resourceUrl")):o.reject(new i.MissingSupportedLocales("Missing supportedLocales")):o.reject(new i.MissingDefaultLocale("Missing defaultLocale"))}}return o.resolve()}},{"./i18n":6,"./i18n-error":5,bluebird:22}],10:[function(t,e,r){var n=t("@trello/post-message-io");e.exports=function(t,e){var r=e||{};return new n({local:window,remote:window.parent,targetOrigin:r.targetOrigin||"https://trello.com",secret:r.secret,handlers:t,hostHandlers:r.hostHandlers})}},{"@trello/post-message-io":21}],11:[function(t,e,r){var n=t("./util/arg"),i=t("./callback-cache"),o=t("./host-handlers"),s=t("./initialize-i18n"),a=t("./initialize-io"),u=t("./process-result"),c=t("@trello/post-message-io"),l=t("bluebird"),f=t("xtend"),h=function(t,e){var r=this;this.io=null,this.handlers={},Object.keys(t).forEach(function(n){r.handlers[n]=function(){var r=arguments,i=this;return window.locale=r[1].locale,s(window.locale,e).then(function(){return l.try(function(){return t[n].apply(i,r)}).then(u)})}}),this.handlers.callback=function(t,e){return i.callback.call(this,t,e,u)},this.options=e||{}};h.prototype.connect=function(){var t=a(this.handlers,f(this.options,{secret:n("secret"),hostHandlers:o}));return this.io=t,t.request("initialize",Object.keys(this.handlers)).then(function(e){return t.secret=e.secret,t.request("ready")}).then(function(){return t})},h.prototype.NotHandled=c.NotHandled,e.exports=h},{"./callback-cache":1,"./host-handlers":4,"./initialize-i18n":9,"./initialize-io":10,"./process-result":12,"./util/arg":13,"@trello/post-message-io":21,bluebird:22,xtend:27}],12:[function(t,e,r){var n=t("./callback-cache"),i=function(t){return[location.origin||location.protocol+"//"+location.host,location.pathname.replace(/[^\/]+$/,""),t].join("")},o=function(t,e){if(!t)return t;if(("url"===e||"icon"===e)&&"string"==typeof t&&0===t.indexOf("./"))return i(t.substr(2));switch(typeof t){case"object":if(Array.isArray(t))return t.map(o);var r={};return Object.keys(t).forEach(function(e){r[e]=o(t[e],e)}),r;case"function":return n.serialize(t);default:return t}};e.exports=o},{"./callback-cache":1}],13:[function(t,e,r){var n=t("lodash.has"),i=null;e.exports=function(t,e){if(!i)try{i=JSON.parse(decodeURIComponent(location.hash.replace(/^#/,"")))}catch(t){i={}}return n(i,t)?i[t]:e}},{"lodash.has":24}],14:[function(t,e,r){e.exports={bytesToHexString:function(t){if(!t)return null;for(var e=0;e<t.length;e+=1){var r=t[e];if("number"!=typeof r||r%1!=0||r>255||r<0)throw new Error("Invalid bytes. Bytes must be 0 - 255")}for(var n=new Uint8Array(t),i=[],o=0;o<n.length;o+=1){var s=n[o].toString(16);s.length<2&&(s="0"+s),i.push(s)}return i.join("")},hexStringToUint8Array:function(t){if(!t)throw new Error("Invalid hexString");var e=t.toLowerCase();if(!/^[0-9a-f]+$/.test(e)||e.length%2!=0)throw new Error("Invalid hexString");for(var r=new Uint8Array(e.length/2),n=0;n<e.length;n+=2){var i=parseInt(e.substr(n,2),16);if(isNaN(i))throw new Error("Invalid hexString");r[n/2]=i}return r}}},{}],15:[function(t,e,r){var n=t("error-ext");e.exports=function(t,e){var r=new n([t,"Error"].join("::"));return e.forEach(function(e){r[e]=new n([t,e].join("::"),{},r)}),r}},{"error-ext":23}],16:[function(t,e,r){e.exports=function(t){return/^https?:\/\//.test(t)?t:[location.protocol,"//",location.host,location.pathname.replace(/[^\/]+$/,""),t].join("")}},{}],17:[function(t,e,r){e.exports=function(t){return String(null===t?"":t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}},{}],18:[function(t,e,r){var n,i=t("text-encoding-utf-8"),o=function(t){return"function"==typeof t},s=o(window.TextEncoder)?window.TextEncoder:i.TextEncoder,a=o(window.TextDecoder)?window.TextDecoder:i.TextDecoder,u=t("./convert"),c=t("bluebird"),l="AES-CBC",f={name:l,length:256},h=["encrypt","decrypt"],p="object"==typeof window.crypto,d=!p&&"object"==typeof window.msCrypto;p?n=null==window.crypto.subtle&&null!=window.crypto.webkitSubtle?window.crypto.webkitSubtle:window.crypto.subtle:d&&(n=window.msCrypto.subtle);var _=function(t){var e=(new s).encode(t);return p?n.digest({name:"SHA-256"},e).then(function(t){return u.bytesToHexString(t)}):d?new c(function(t,r){var i=n.digest({name:"SHA-256"},e);i.oncomplete=function(e){t(u.bytesToHexString(e.target.result))},i.onerror=function(t){r(new Error("Error digesting text: "+t.type))}}):c.reject(new Error("Browser not supported."))};e.exports={generateInitVector:function(){if(p&&"function"==typeof window.crypto.getRandomValues)return window.crypto.getRandomValues(new Uint8Array(16));if(d&&"function"==typeof window.msCrypto.getRandomValues)return window.msCrypto.getRandomValues(new Uint8Array(16));throw new Error("Browser not supported.")},generateAESCBCKey:function(){return p?n.generateKey(f,!0,h):d?new c(function(t,e){var r=n.generateKey(f,!0,h);r.oncomplete=function(e){t(e.target.result)},r.onerror=function(t){e(new Error("Error generating key: "+t.type))}}):c.reject(new Error("Browser not supported."))},importAESCBCKeyFromRaw:function(t){var e=u.hexStringToUint8Array(t);return p?n.importKey("raw",e,l,!0,h):d?new c(function(t,r){var i=n.importKey("raw",e,l,!0,h);i.oncomplete=function(e){t(e.target.result)},i.onerror=function(t){r(new Error("Error importing key: "+t.type))}}):c.reject(new Error("Browser not supported."))},exportAESCBCKeyToRaw:function(t){return p?n.exportKey("raw",t).then(function(t){return u.bytesToHexString(t)}):d?new c(function(e,r){var i=n.exportKey("raw",t);i.oncomplete=function(t){e(u.bytesToHexString(t.target.result))},i.onerror=function(t){r(new Error("Error exporting key: "+t.type))}}):c.reject(new Error("Browser not supported."))},encryptSecret:function(t,e,r){return _(r).then(function(i){var o=(new s).encode(i+r);return p?n.encrypt({name:l,iv:t},e,o).then(function(t){return u.bytesToHexString(t)}):d?new c(function(r,i){var s=n.encrypt({name:l,iv:t},e,o);s.oncomplete=function(t){r(u.bytesToHexString(t.target.result))},s.onerror=function(t){i(new Error("Error encrypting secret: "+t.type))}}):c.reject(new Error("Browser not supported."))})},decryptSecret:function(t,e,r){var i=u.hexStringToUint8Array(r);return new c(function(r,o){if(p)n.decrypt({name:l,iv:t},e,i).then(function(t){r((new a).decode(t))}).catch(function(t){o(new Error("Decryption failed. Message: "+t.message))});else if(d){var s=n.decrypt({name:l,iv:t},e,i);s.oncomplete=function(t){r((new a).decode(t.target.result))},s.onerror=function(t){o(new Error("Decryption failed. Message: "+t.type))}}else o(new Error("Browser not supported."))}).then(function(t){var e=t.substring(0,64),r=t.substring(64);if(!/^[a-f0-9]{64}$/.test(e))throw new Error("Decryption failed. Unable to validate integrity.");return _(r).then(function(t){if(t===e)return r;throw new Error("Decryption failed. Unable to validate integrity.")})})},sha256Digest:_}},{"./convert":14,bluebird:22,"text-encoding-utf-8":26}],19:[function(t,e,r){e.exports={isId:function(t){return/^[a-f0-9]{24}$/.test(t)},isShortLink:function(t){return/^[a-zA-Z0-9]{8}$/.test(t)},isAllowedVisibilty:function(t){return-1!==["shared","private"].indexOf(t)},isAllowedScope:function(t){return-1!==["board","card","member","organization"].indexOf(t)}}},{}],20:[function(t,e,r){e.exports=function(t){window.console&&"function"==typeof console.warn&&console.warn(t)}},{}],21:[function(t,e,r){var n=t("bluebird"),i=t("error-ext"),o=function(t){this.local=t.local,this.remote=t.remote,this.targetOrigin=t.targetOrigin,this.secret=t.secret,this.handlers=t.handlers,this.defaultHandler=t.defaultHandler,this.hostHandlers=t.hostHandlers,this._pendingRequests={},this._messageQueue=[],this.listen()};o.NotHandled=i("PostMessageIO:NotHandled",{code:"not handled"}),o.UnsupportedCommand=i("PostMessageIO:UnsupportedCommand",{code:"unsupported command"});var s=function(t,e){return Array.prototype.slice.call(t,e)},a=function(){var t={};return s(arguments,0).forEach(function(e){if(e)for(key in e)t[key]=e[key]}),t},u="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";o.randomId=function(t){t=t||16;var e=[];if(window.crypto&&window.crypto.getRandomValues)e=window.crypto.getRandomValues(new Uint32Array(t));else if("object"==typeof window.msCrypto&&"function"==typeof window.msCrypto.getRandomValues)e=window.msCrypto.getRandomValues(new Uint32Array(t));else for(;e.length<t;)e.push(Math.floor(Math.random()*u.length));for(var r=[],n=0;n<t;n++)r.push(u[e[n]%u.length]);return r.join("")},o.prototype.listen=function(){var t=this;t.stop(),t.listener=function(e){var r=e.data,n=e.source;if(n==t.remote||r.secret==t.secret){var i=function(e){var r=e.data;switch(e.type){case"request":t._handleRequest(r.id,r.command,r.args,n);break;case"response":t._handleResponse(r.to,r.success,r.response);break;case"bulk":r.forEach(i)}};i(r)}},this.local.addEventListener("message",t.listener)},o.prototype.stop=function(){this.local.removeEventListener("message",self.listener)},o.prototype._handleRequest=function(t,e,r,i){var u=this,c=a(u.hostHandlers,{NotHandled:o.NotHandled,command:e,args:r,source:i,request:function(){return u.request.apply(u,s(arguments,0).concat([i]))},secret:u.secret});n.try(function(){if(!u.handlers.hasOwnProperty(e)){if(u.defaultHandler)return u.defaultHandler.apply(u,[c,e].concat(r));throw new o.UnsupportedCommand("unsupported command: "+e)}return u.handlers[e].apply(u,[c].concat(r))}).then(function(e){u.respond(t,!0,e,i)}).catch(o.NotHandled,o.UnsupportedCommand,function(e){u.respond(t,!1,{code:e.code,message:e.message},i)}).done()},o.prototype._handleResponse=function(t,e,r){var n=this;if(n._pendingRequests.hasOwnProperty(t))if(e)n._pendingRequests[t].resolve(r);else{var i=null;switch(r.code){case"not handled":i=new o.NotHandled(r.message);break;case"unsupported command":i=new o.UnsupportedCommand(r.message);break;default:i=new Error(r.message)}n._pendingRequests[t].reject(i)}},o.prototype.raw=function(t,e,r){var n=this;if("bulk"==t){var i={secret:n.secret,type:t,data:e};r?r.postMessage(i,"*"):n.remote.postMessage(i,n.targetOrigin)}else 0==n._messageQueue.length&&setTimeout(n.emptyQueue.bind(n),0),n._messageQueue.push({type:t,data:e,target:r})},o.prototype.emptyQueue=function(){var t=this,e=t._messageQueue;t._messageQueue=[];for(var r=0;r<e.length;r++){var n=e[r];if(!n.sent){for(var i=n.target,o=[],s=r;s<e.length;s++)e[s].target==i&&(o.push({type:e[s].type,data:e[s].data}),e[s].sent=!0);t.raw("bulk",o,i)}}},o.prototype.request=function(t){var e=this,r=s(arguments,1),i=o.randomId(),a=void 0,u=r[r.length-1];return u&&"function"==typeof u.postMessage&&(a=r.pop()),e.raw("request",{id:i,command:t,args:r},a),new n(function(n,o){e._pendingRequests[i]={id:i,command:t,args:r,resolve:n,reject:o}})},o.prototype.respond=function(t,e,r,n){this.raw("response",{to:t,success:e,response:r},n)},e.exports=o},{bluebird:22,"error-ext":23}],22:[function(t,e,r){(function(t,n){!function(t){if("object"==typeof r&&void 0!==e)e.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var i;"undefined"!=typeof window?i=window:void 0!==n?i=n:"undefined"!=typeof self&&(i=self),i.Promise=t()}}(function(){return function t(e,r,n){function i(s,a){if(!r[s]){if(!e[s]){var u="function"==typeof _dereq_&&_dereq_;if(!a&&u)return u(s,!0);if(o)return o(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var l=r[s]={exports:{}};e[s][0].call(l.exports,function(t){return i(e[s][1][t]||t)},l,l.exports,t,e,r,n)}return r[s].exports}for(var o="function"==typeof _dereq_&&_dereq_,s=0;s<n.length;s++)i(n[s]);return i}({1:[function(t,e,r){"use strict";e.exports=function(t){function e(t){var e=new r(t),n=e.promise();return e.setHowMany(1),e.setUnwrap(),e.init(),n}var r=t._SomePromiseArray;t.any=function(t){return e(t)},t.prototype.any=function(){return e(this)}}},{}],2:[function(t,e,r){"use strict";function n(){this._isTickUsed=!1,this._lateQueue=new c(16),this._normalQueue=new c(16),this._trampolineEnabled=!0;var t=this;this.drainQueues=function(){t._drainQueues()},this._schedule=u.isStatic?u(this.drainQueues):u}function i(t,e,r){this._lateQueue.push(t,e,r),this._queueTick()}function o(t,e,r){this._normalQueue.push(t,e,r),this._queueTick()}function s(t){this._normalQueue._pushOne(t),this._queueTick()}var a;try{throw new Error}catch(t){a=t}var u=t("./schedule.js"),c=t("./queue.js"),l=t("./util.js");n.prototype.disableTrampolineIfNecessary=function(){l.hasDevTools&&(this._trampolineEnabled=!1)},n.prototype.enableTrampoline=function(){this._trampolineEnabled||(this._trampolineEnabled=!0,this._schedule=function(t){setTimeout(t,0)})},n.prototype.haveItemsQueued=function(){return this._normalQueue.length()>0},n.prototype.throwLater=function(t,e){if(1===arguments.length&&(e=t,t=function(){throw e}),"undefined"!=typeof setTimeout)setTimeout(function(){t(e)},0);else try{this._schedule(function(){t(e)})}catch(t){throw new Error("No async scheduler available\n\n    See http://goo.gl/m3OTXk\n")}},l.hasDevTools?(u.isStatic&&(u=function(t){setTimeout(t,0)}),n.prototype.invokeLater=function(t,e,r){this._trampolineEnabled?i.call(this,t,e,r):this._schedule(function(){setTimeout(function(){t.call(e,r)},100)})},n.prototype.invoke=function(t,e,r){this._trampolineEnabled?o.call(this,t,e,r):this._schedule(function(){t.call(e,r)})},n.prototype.settlePromises=function(t){this._trampolineEnabled?s.call(this,t):this._schedule(function(){t._settlePromises()})}):(n.prototype.invokeLater=i,n.prototype.invoke=o,n.prototype.settlePromises=s),n.prototype.invokeFirst=function(t,e,r){this._normalQueue.unshift(t,e,r),this._queueTick()},n.prototype._drainQueue=function(t){for(;t.length()>0;){var e=t.shift();if("function"==typeof e){var r=t.shift(),n=t.shift();e.call(r,n)}else e._settlePromises()}},n.prototype._drainQueues=function(){this._drainQueue(this._normalQueue),this._reset(),this._drainQueue(this._lateQueue)},n.prototype._queueTick=function(){this._isTickUsed||(this._isTickUsed=!0,this._schedule(this.drainQueues))},n.prototype._reset=function(){this._isTickUsed=!1},e.exports=new n,e.exports.firstLineError=a},{"./queue.js":28,"./schedule.js":31,"./util.js":38}],3:[function(t,e,r){"use strict";e.exports=function(t,e,r){var n=function(t,e){this._reject(e)},i=function(t,e){e.promiseRejectionQueued=!0,e.bindingPromise._then(n,n,null,this,t)},o=function(t,e){this._isPending()&&this._resolveCallback(e.target)},s=function(t,e){e.promiseRejectionQueued||this._reject(t)};t.prototype.bind=function(n){var a=r(n),u=new t(e);u._propagateFrom(this,1);var c=this._target();if(u._setBoundTo(a),a instanceof t){var l={promiseRejectionQueued:!1,promise:u,target:c,bindingPromise:a};c._then(e,i,u._progress,u,l),a._then(o,s,u._progress,u,l)}else u._resolveCallback(c);return u},t.prototype._setBoundTo=function(t){void 0!==t?(this._bitField=131072|this._bitField,this._boundTo=t):this._bitField=-131073&this._bitField},t.prototype._isBound=function(){return 131072==(131072&this._bitField)},t.bind=function(n,i){var o=r(n),s=new t(e);return s._setBoundTo(o),o instanceof t?o._then(function(){s._resolveCallback(i)},s._reject,s._progress,s,null):s._resolveCallback(i),s}}},{}],4:[function(t,e,r){"use strict";var n;"undefined"!=typeof Promise&&(n=Promise);var i=t("./promise.js")();i.noConflict=function(){try{Promise===i&&(Promise=n)}catch(t){}return i},e.exports=i},{"./promise.js":23}],5:[function(t,e,r){"use strict";var n=Object.create;if(n){var i=n(null),o=n(null);i[" size"]=o[" size"]=0}e.exports=function(e){function r(t,r){var n;if(null!=t&&(n=t[r]),"function"!=typeof n){var i="Object "+s.classString(t)+" has no method '"+s.toString(r)+"'";throw new e.TypeError(i)}return n}function n(t){return r(t,this.pop()).apply(t,this)}function i(t){return t[this]}function o(t){var e=+this;return e<0&&(e=Math.max(0,e+t.length)),t[e]}var s=t("./util.js"),a=s.canEvaluate;s.isIdentifier,e.prototype.call=function(t){for(var e=arguments.length,r=new Array(e-1),i=1;i<e;++i)r[i-1]=arguments[i];return r.push(t),this._then(n,void 0,void 0,r,void 0)},e.prototype.get=function(t){var e;if("number"==typeof t)e=o;else if(a){var r=(void 0)(t);e=null!==r?r:i}else e=i;return this._then(e,void 0,void 0,t,void 0)}}},{"./util.js":38}],6:[function(t,e,r){"use strict";e.exports=function(e){var r=t("./errors.js"),n=t("./async.js"),i=r.CancellationError;e.prototype._cancel=function(t){if(!this.isCancellable())return this;for(var e,r=this;void 0!==(e=r._cancellationParent)&&e.isCancellable();)r=e;this._unsetCancellable(),r._target()._rejectCallback(t,!1,!0)},e.prototype.cancel=function(t){return this.isCancellable()?(void 0===t&&(t=new i),n.invokeLater(this._cancel,this,t),this):this},e.prototype.cancellable=function(){return this._cancellable()?this:(n.enableTrampoline(),this._setCancellable(),this._cancellationParent=void 0,this)},e.prototype.uncancellable=function(){var t=this.then();return t._unsetCancellable(),t},e.prototype.fork=function(t,e,r){var n=this._then(t,e,r,void 0,void 0);return n._setCancellable(),n._cancellationParent=void 0,n}}},{"./async.js":2,"./errors.js":13}],7:[function(e,r,n){"use strict";r.exports=function(){function r(t){this._parent=t;var e=this._length=1+(void 0===t?0:t._length);b(this,r),e>32&&this.uncycle()}function n(t,e){for(var r=0;r<e.length-1;++r)e[r].push("From previous event:"),e[r]=e[r].join("\n");return r<e.length&&(e[r]=e[r].join("\n")),t+"\n"+e.join("\n")}function i(t){for(var e=0;e<t.length;++e)(0===t[e].length||e+1<t.length&&t[e][0]===t[e+1][0])&&(t.splice(e,1),e--)}function o(t){for(var e=t[0],r=1;r<t.length;++r){for(var n=t[r],i=e.length-1,o=e[i],s=-1,a=n.length-1;a>=0;--a)if(n[a]===o){s=a;break}for(a=s;a>=0;--a){var u=n[a];if(e[i]!==u)break;e.pop(),i--}e=n}}function s(t){for(var e=[],r=0;r<t.length;++r){var n=t[r],i=_.test(n)||"    (No stack trace)"===n,o=i&&g(n);i&&!o&&(y&&" "!==n.charAt(0)&&(n="    "+n),e.push(n))}return e}function a(t){for(var e=t.stack.replace(/\s+$/g,"").split("\n"),r=0;r<e.length;++r){var n=e[r];if("    (No stack trace)"===n||_.test(n))break}return r>0&&(e=e.slice(r)),e}function u(t){var e;if("function"==typeof t)e="[function "+(t.name||"anonymous")+"]";else{if(e=t.toString(),/\[object [a-zA-Z0-9$_]+\]/.test(e))try{e=JSON.stringify(t)}catch(t){}0===e.length&&(e="(empty array)")}return"(<"+c(e)+">, no stack trace)"}function c(t){return t.length<41?t:t.substr(0,38)+"..."}function l(t){var e=t.match(m);if(e)return{fileName:e[1],line:parseInt(e[2],10)}}var f,h=e("./async.js"),p=e("./util.js"),d=/[\\\/]bluebird[\\\/]js[\\\/](main|debug|zalgo|instrumented)/,_=null,v=null,y=!1;p.inherits(r,Error),r.prototype.uncycle=function(){var t=this._length;if(!(t<2)){for(var e=[],r={},n=0,i=this;void 0!==i;++n)e.push(i),i=i._parent;for(n=(t=this._length=n)-1;n>=0;--n){var o=e[n].stack;void 0===r[o]&&(r[o]=n)}for(n=0;n<t;++n){var s=r[e[n].stack];if(void 0!==s&&s!==n){s>0&&(e[s-1]._parent=void 0,e[s-1]._length=1),e[n]._parent=void 0,e[n]._length=1;var a=n>0?e[n-1]:this;s<t-1?(a._parent=e[s+1],a._parent.uncycle(),a._length=a._parent._length+1):(a._parent=void 0,a._length=1);for(var u=a._length+1,c=n-2;c>=0;--c)e[c]._length=u,u++;return}}}},r.prototype.parent=function(){return this._parent},r.prototype.hasParent=function(){return void 0!==this._parent},r.prototype.attachExtraTrace=function(t){if(!t.__stackCleaned__){this.uncycle();for(var e=r.parseStackAndMessage(t),a=e.message,u=[e.stack],c=this;void 0!==c;)u.push(s(c.stack.split("\n"))),c=c._parent;o(u),i(u),p.notEnumerableProp(t,"stack",n(a,u)),p.notEnumerableProp(t,"__stackCleaned__",!0)}},r.parseStackAndMessage=function(t){var e=t.stack,r=t.toString();return e="string"==typeof e&&e.length>0?a(t):["    (No stack trace)"],{message:r,stack:s(e)}},r.formatAndLogError=function(t,e){if("undefined"!=typeof console){var r;if("object"==typeof t||"function"==typeof t){var n=t.stack;r=e+v(n,t)}else r=e+String(t);"function"==typeof f?f(r):"function"!=typeof console.log&&"object"!=typeof console.log||console.log(r)}},r.unhandledRejection=function(t){r.formatAndLogError(t,"^--- With additional stack trace: ")},r.isSupported=function(){return"function"==typeof b},r.fireRejectionEvent=function(t,e,n,i){var o=!1;try{"function"==typeof e&&(o=!0,"rejectionHandled"===t?e(i):e(n,i))}catch(t){h.throwLater(t)}var s=!1;try{s=j(t,n,i)}catch(t){s=!0,h.throwLater(t)}var a=!1;if(w)try{a=w(t.toLowerCase(),{reason:n,promise:i})}catch(t){a=!0,h.throwLater(t)}s||o||a||"unhandledRejection"!==t||r.formatAndLogError(n,"Unhandled rejection ")};var g=function(){return!1},m=/[\/<\(]([^:\/]+):(\d+):(?:\d+)\)?\s*$/;r.setBounds=function(t,e){if(r.isSupported()){for(var n,i,o=t.stack.split("\n"),s=e.stack.split("\n"),a=-1,u=-1,c=0;c<o.length;++c)if(f=l(o[c])){n=f.fileName,a=f.line;break}for(c=0;c<s.length;++c){var f=l(s[c]);if(f){i=f.fileName,u=f.line;break}}a<0||u<0||!n||!i||n!==i||a>=u||(g=function(t){if(d.test(t))return!0;var e=l(t);return!!(e&&e.fileName===n&&a<=e.line&&e.line<=u)})}};var w,b=function(){var t=/^\s*at\s*/,e=function(t,e){return"string"==typeof t?t:void 0!==e.name&&void 0!==e.message?e.toString():u(e)};if("number"==typeof Error.stackTraceLimit&&"function"==typeof Error.captureStackTrace){Error.stackTraceLimit=Error.stackTraceLimit+6,_=t,v=e;var r=Error.captureStackTrace;return g=function(t){return d.test(t)},function(t,e){Error.stackTraceLimit=Error.stackTraceLimit+6,r(t,e),Error.stackTraceLimit=Error.stackTraceLimit-6}}var n=new Error;if("string"==typeof n.stack&&n.stack.split("\n")[0].indexOf("stackDetection@")>=0)return _=/@/,v=e,y=!0,function(t){t.stack=(new Error).stack};var i;try{throw new Error}catch(t){i="stack"in t}return"stack"in n||!i||"number"!=typeof Error.stackTraceLimit?(v=function(t,e){return"string"==typeof t?t:"object"!=typeof e&&"function"!=typeof e||void 0===e.name||void 0===e.message?u(e):e.toString()},null):(_=t,v=e,function(t){Error.stackTraceLimit=Error.stackTraceLimit+6;try{throw new Error}catch(e){t.stack=e.stack}Error.stackTraceLimit=Error.stackTraceLimit-6})}(),j=function(){if(p.isNode)return function(e,r,n){return"rejectionHandled"===e?t.emit(e,n):t.emit(e,r,n)};var e=!1,r=!0;try{var n=new self.CustomEvent("test");e=n instanceof CustomEvent}catch(e){}if(!e)try{var i=document.createEvent("CustomEvent");i.initCustomEvent("testingtheevent",!1,!0,{}),self.dispatchEvent(i)}catch(e){r=!1}r&&(w=function(t,r){var n;return e?n=new self.CustomEvent(t,{detail:r,bubbles:!1,cancelable:!0}):self.dispatchEvent&&(n=document.createEvent("CustomEvent")).initCustomEvent(t,!1,!0,r),!!n&&!self.dispatchEvent(n)});var o={};return o.unhandledRejection="onunhandledRejection".toLowerCase(),o.rejectionHandled="onrejectionHandled".toLowerCase(),function(t,e,r){var n=o[t],i=self[n];return!!i&&("rejectionHandled"===t?i.call(self,r):i.call(self,e,r),!0)}}();return"undefined"!=typeof console&&void 0!==console.warn&&(f=function(t){console.warn(t)},p.isNode&&t.stderr.isTTY?f=function(e){t.stderr.write("[31m"+e+"[39m\n")}:p.isNode||"string"!=typeof(new Error).stack||(f=function(t){console.warn("%c"+t,"color: red")})),r}},{"./async.js":2,"./util.js":38}],8:[function(t,e,r){"use strict";e.exports=function(e){function r(t,e,r){this._instances=t,this._callback=e,this._promise=r}function n(t,e){var r={},n=s(t).call(r,e);return n===a?n:u(r).length?(a.e=new c("Catch filter must inherit from Error or be a simple predicate function\n\n    See http://goo.gl/o84o68\n"),a):n}var i=t("./util.js"),o=t("./errors.js"),s=i.tryCatch,a=i.errorObj,u=t("./es5.js").keys,c=o.TypeError;return r.prototype.doFilter=function(t){for(var r=this._callback,i=this._promise._boundValue(),o=0,u=this._instances.length;o<u;++o){var c=this._instances[o],l=c===Error||null!=c&&c.prototype instanceof Error;if(l&&t instanceof c)return(h=s(r).call(i,t))===a?(e.e=h.e,e):h;if("function"==typeof c&&!l){var f=n(c,t);if(f===a){t=a.e;break}if(f){var h=s(r).call(i,t);return h===a?(e.e=h.e,e):h}}}return e.e=t,e},r}},{"./errors.js":13,"./es5.js":14,"./util.js":38}],9:[function(t,e,r){"use strict";e.exports=function(t,e,r){function n(){this._trace=new e(i())}function i(){var t=o.length-1;if(t>=0)return o[t]}var o=[];return n.prototype._pushContext=function(){r()&&void 0!==this._trace&&o.push(this._trace)},n.prototype._popContext=function(){r()&&void 0!==this._trace&&o.pop()},t.prototype._peekContext=i,t.prototype._pushContext=n.prototype._pushContext,t.prototype._popContext=n.prototype._popContext,function(){if(r())return new n}}},{}],10:[function(e,r,n){"use strict";r.exports=function(r,n){var i,o,s=r._getDomain,a=e("./async.js"),u=e("./errors.js").Warning,c=e("./util.js"),l=c.canAttachTrace,f=c.isNode&&(!!t.env.BLUEBIRD_DEBUG||"development"===t.env.NODE_ENV);return c.isNode&&0==t.env.BLUEBIRD_DEBUG&&(f=!1),f&&a.disableTrampolineIfNecessary(),r.prototype._ignoreRejections=function(){this._unsetRejectionIsUnhandled(),this._bitField=16777216|this._bitField},r.prototype._ensurePossibleRejectionHandled=function(){0==(16777216&this._bitField)&&(this._setRejectionIsUnhandled(),a.invokeLater(this._notifyUnhandledRejection,this,void 0))},r.prototype._notifyUnhandledRejectionIsHandled=function(){n.fireRejectionEvent("rejectionHandled",i,void 0,this)},r.prototype._notifyUnhandledRejection=function(){if(this._isRejectionUnhandled()){var t=this._getCarriedStackTrace()||this._settledValue;this._setUnhandledRejectionIsNotified(),n.fireRejectionEvent("unhandledRejection",o,t,this)}},r.prototype._setUnhandledRejectionIsNotified=function(){this._bitField=524288|this._bitField},r.prototype._unsetUnhandledRejectionIsNotified=function(){this._bitField=-524289&this._bitField},r.prototype._isUnhandledRejectionNotified=function(){return(524288&this._bitField)>0},r.prototype._setRejectionIsUnhandled=function(){this._bitField=2097152|this._bitField},r.prototype._unsetRejectionIsUnhandled=function(){this._bitField=-2097153&this._bitField,this._isUnhandledRejectionNotified()&&(this._unsetUnhandledRejectionIsNotified(),this._notifyUnhandledRejectionIsHandled())},r.prototype._isRejectionUnhandled=function(){return(2097152&this._bitField)>0},r.prototype._setCarriedStackTrace=function(t){this._bitField=1048576|this._bitField,this._fulfillmentHandler0=t},r.prototype._isCarryingStackTrace=function(){return(1048576&this._bitField)>0},r.prototype._getCarriedStackTrace=function(){return this._isCarryingStackTrace()?this._fulfillmentHandler0:void 0},r.prototype._captureStackTrace=function(){return f&&(this._trace=new n(this._peekContext())),this},r.prototype._attachExtraTrace=function(t,e){if(f&&l(t)){var r=this._trace;if(void 0!==r&&e&&(r=r._parent),void 0!==r)r.attachExtraTrace(t);else if(!t.__stackCleaned__){var i=n.parseStackAndMessage(t);c.notEnumerableProp(t,"stack",i.message+"\n"+i.stack.join("\n")),c.notEnumerableProp(t,"__stackCleaned__",!0)}}},r.prototype._warn=function(t){var e=new u(t),r=this._peekContext();if(r)r.attachExtraTrace(e);else{var i=n.parseStackAndMessage(e);e.stack=i.message+"\n"+i.stack.join("\n")}n.formatAndLogError(e,"")},r.onPossiblyUnhandledRejection=function(t){var e=s();o="function"==typeof t?null===e?t:e.bind(t):void 0},r.onUnhandledRejectionHandled=function(t){var e=s();i="function"==typeof t?null===e?t:e.bind(t):void 0},r.longStackTraces=function(){if(a.haveItemsQueued()&&!1===f)throw new Error("cannot enable long stack traces after promises have been created\n\n    See http://goo.gl/DT1qyG\n");(f=n.isSupported())&&a.disableTrampolineIfNecessary()},r.hasLongStackTraces=function(){return f&&n.isSupported()},n.isSupported()||(r.longStackTraces=function(){},f=!1),function(){return f}}},{"./async.js":2,"./errors.js":13,"./util.js":38}],11:[function(t,e,r){"use strict";var n=t("./util.js").isPrimitive;e.exports=function(t){var e=function(){return this},r=function(){throw this},i=function(){},o=function(){throw void 0},s=function(t,e){return 1===e?function(){throw t}:2===e?function(){return t}:void 0};t.prototype.return=t.prototype.thenReturn=function(r){return void 0===r?this.then(i):n(r)?this._then(s(r,2),void 0,void 0,void 0,void 0):(r instanceof t&&r._ignoreRejections(),this._then(e,void 0,void 0,r,void 0))},t.prototype.throw=t.prototype.thenThrow=function(t){return void 0===t?this.then(o):n(t)?this._then(s(t,1),void 0,void 0,void 0,void 0):this._then(r,void 0,void 0,t,void 0)}}},{"./util.js":38}],12:[function(t,e,r){"use strict";e.exports=function(t,e){var r=t.reduce;t.prototype.each=function(t){return r(this,t,null,e)},t.each=function(t,n){return r(t,n,null,e)}}},{}],13:[function(t,e,r){"use strict";function n(t,e){function r(n){if(!(this instanceof r))return new r(n);f(this,"message","string"==typeof n?n:e),f(this,"name",t),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):Error.call(this)}return l(r,Error),r}function i(t){if(!(this instanceof i))return new i(t);f(this,"name","OperationalError"),f(this,"message",t),this.cause=t,this.isOperational=!0,t instanceof Error?(f(this,"message",t.message),f(this,"stack",t.stack)):Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}var o,s,a=t("./es5.js"),u=a.freeze,c=t("./util.js"),l=c.inherits,f=c.notEnumerableProp,h=n("Warning","warning"),p=n("CancellationError","cancellation error"),d=n("TimeoutError","timeout error"),_=n("AggregateError","aggregate error");try{o=TypeError,s=RangeError}catch(t){o=n("TypeError","type error"),s=n("RangeError","range error")}for(var v="join pop push shift unshift slice filter forEach some every map indexOf lastIndexOf reduce reduceRight sort reverse".split(" "),y=0;y<v.length;++y)"function"==typeof Array.prototype[v[y]]&&(_.prototype[v[y]]=Array.prototype[v[y]]);a.defineProperty(_.prototype,"length",{value:0,configurable:!1,writable:!0,enumerable:!0}),_.prototype.isOperational=!0;var g=0;_.prototype.toString=function(){var t=Array(4*g+1).join(" "),e="\n"+t+"AggregateError of:\n";g++,t=Array(4*g+1).join(" ");for(var r=0;r<this.length;++r){for(var n=this[r]===this?"[Circular AggregateError]":this[r]+"",i=n.split("\n"),o=0;o<i.length;++o)i[o]=t+i[o];e+=(n=i.join("\n"))+"\n"}return g--,e},l(i,Error);var m=Error.__BluebirdErrorTypes__;m||(m=u({CancellationError:p,TimeoutError:d,OperationalError:i,RejectionError:i,AggregateError:_}),f(Error,"__BluebirdErrorTypes__",m)),e.exports={Error:Error,TypeError:o,RangeError:s,CancellationError:m.CancellationError,OperationalError:m.OperationalError,TimeoutError:m.TimeoutError,AggregateError:m.AggregateError,Warning:h}},{"./es5.js":14,"./util.js":38}],14:[function(t,e,r){var n=function(){"use strict";return void 0===this}();if(n)e.exports={freeze:Object.freeze,defineProperty:Object.defineProperty,getDescriptor:Object.getOwnPropertyDescriptor,keys:Object.keys,names:Object.getOwnPropertyNames,getPrototypeOf:Object.getPrototypeOf,isArray:Array.isArray,isES5:n,propertyIsWritable:function(t,e){var r=Object.getOwnPropertyDescriptor(t,e);return!(r&&!r.writable&&!r.set)}};else{var i={}.hasOwnProperty,o={}.toString,s={}.constructor.prototype,a=function(t){var e=[];for(var r in t)i.call(t,r)&&e.push(r);return e};e.exports={isArray:function(t){try{return"[object Array]"===o.call(t)}catch(t){return!1}},keys:a,names:a,defineProperty:function(t,e,r){return t[e]=r.value,t},getDescriptor:function(t,e){return{value:t[e]}},freeze:function(t){return t},getPrototypeOf:function(t){try{return Object(t).constructor.prototype}catch(t){return s}},isES5:n,propertyIsWritable:function(){return!0}}}},{}],15:[function(t,e,r){"use strict";e.exports=function(t,e){var r=t.map;t.prototype.filter=function(t,n){return r(this,t,n,e)},t.filter=function(t,n,i){return r(t,n,i,e)}}},{}],16:[function(t,e,r){"use strict";e.exports=function(e,r,n){function i(){return this}function o(){throw this}function s(t){return function(){return t}}function a(t){return function(){throw t}}function u(t,e,r){var n;return n=h(e)?r?s(e):a(e):r?i:o,t._then(n,p,void 0,e,void 0)}function c(t){var i=this.promise,o=this.handler,s=i._isBound()?o.call(i._boundValue()):o();if(void 0!==s){var a=n(s,i);if(a instanceof e)return a=a._target(),u(a,t,i.isFulfilled())}return i.isRejected()?(r.e=t,r):t}function l(t){var r=this.promise,i=this.handler,o=r._isBound()?i.call(r._boundValue(),t):i(t);if(void 0!==o){var s=n(o,r);if(s instanceof e)return s=s._target(),u(s,t,!0)}return t}var f=t("./util.js"),h=f.isPrimitive,p=f.thrower;e.prototype._passThroughHandler=function(t,e){if("function"!=typeof t)return this.then();var r={promise:this,handler:t};return this._then(e?c:l,e?c:void 0,void 0,r,void 0)},e.prototype.lastly=e.prototype.finally=function(t){return this._passThroughHandler(t,!0)},e.prototype.tap=function(t){return this._passThroughHandler(t,!1)}}},{"./util.js":38}],17:[function(t,e,r){"use strict";e.exports=function(e,r,n,i){function o(t,r,n){for(var o=0;o<r.length;++o){n._pushContext();var s=l(r[o])(t);if(n._popContext(),s===c){n._pushContext();var a=e.reject(c.e);return n._popContext(),a}var u=i(s,n);if(u instanceof e)return u}return null}function s(t,r,i,o){(this._promise=new e(n))._captureStackTrace(),this._stack=o,this._generatorFunction=t,this._receiver=r,this._generator=void 0,this._yieldHandlers="function"==typeof i?[i].concat(f):f}var a=t("./errors.js").TypeError,u=t("./util.js"),c=u.errorObj,l=u.tryCatch,f=[];s.prototype.promise=function(){return this._promise},s.prototype._run=function(){this._generator=this._generatorFunction.call(this._receiver),this._receiver=this._generatorFunction=void 0,this._next(void 0)},s.prototype._continue=function(t){if(t===c)return this._promise._rejectCallback(t.e,!1,!0);var r=t.value;if(!0===t.done)this._promise._resolveCallback(r);else{var n=i(r,this._promise);if(!(n instanceof e)&&null===(n=o(n,this._yieldHandlers,this._promise)))return void this._throw(new a("A value %s was yielded that could not be treated as a promise\n\n    See http://goo.gl/4Y4pDk\n\n".replace("%s",r)+"From coroutine:\n"+this._stack.split("\n").slice(1,-7).join("\n")));n._then(this._next,this._throw,void 0,this,null)}},s.prototype._throw=function(t){this._promise._attachExtraTrace(t),this._promise._pushContext();var e=l(this._generator.throw).call(this._generator,t);this._promise._popContext(),this._continue(e)},s.prototype._next=function(t){this._promise._pushContext();var e=l(this._generator.next).call(this._generator,t);this._promise._popContext(),this._continue(e)},e.coroutine=function(t,e){if("function"!=typeof t)throw new a("generatorFunction must be a function\n\n    See http://goo.gl/6Vqhm0\n");var r=Object(e).yieldHandler,n=s,i=(new Error).stack;return function(){var e=t.apply(this,arguments),o=new n(void 0,void 0,r,i);return o._generator=e,o._next(void 0),o.promise()}},e.coroutine.addYieldHandler=function(t){if("function"!=typeof t)throw new a("fn must be a function\n\n    See http://goo.gl/916lJJ\n");f.push(t)},e.spawn=function(t){if("function"!=typeof t)return r("generatorFunction must be a function\n\n    See http://goo.gl/6Vqhm0\n");var n=new s(t,this),i=n.promise();return n._run(e.spawn),i}}},{"./errors.js":13,"./util.js":38}],18:[function(t,e,r){"use strict";e.exports=function(e,r,n,i){var o=t("./util.js");o.canEvaluate,o.tryCatch,o.errorObj,e.join=function(){var t,e=arguments.length-1;if(e>0&&"function"==typeof arguments[e]){t=arguments[e]}for(var n=arguments.length,i=new Array(n),o=0;o<n;++o)i[o]=arguments[o];t&&i.pop();var s=new r(i).promise();return void 0!==t?s.spread(t):s}}},{"./util.js":38}],19:[function(t,e,r){"use strict";e.exports=function(e,r,n,i,o){function s(t,e,r,n){this.constructor$(t),this._promise._captureStackTrace();var i=c();this._callback=null===i?e:i.bind(e),this._preservedValues=n===o?new Array(this.length()):null,this._limit=r,this._inFlight=0,this._queue=r>=1?[]:_,l.invoke(a,this,void 0)}function a(){this._init$(void 0,-2)}function u(t,e,r,n){var i="object"==typeof r&&null!==r?r.concurrency:0;return i="number"==typeof i&&isFinite(i)&&i>=1?i:0,new s(t,e,i,n)}var c=e._getDomain,l=t("./async.js"),f=t("./util.js"),h=f.tryCatch,p=f.errorObj,d={},_=[];f.inherits(s,r),s.prototype._init=function(){},s.prototype._promiseFulfilled=function(t,r){var n=this._values,o=this.length(),s=this._preservedValues,a=this._limit;if(n[r]===d){if(n[r]=t,a>=1&&(this._inFlight--,this._drainQueue(),this._isResolved()))return}else{if(a>=1&&this._inFlight>=a)return n[r]=t,void this._queue.push(r);null!==s&&(s[r]=t);var u=this._callback,c=this._promise._boundValue();this._promise._pushContext();var l=h(u).call(c,t,r,o);if(this._promise._popContext(),l===p)return this._reject(l.e);var f=i(l,this._promise);if(f instanceof e){if((f=f._target())._isPending())return a>=1&&this._inFlight++,n[r]=d,f._proxyPromiseArray(this,r);if(!f._isFulfilled())return this._reject(f._reason());l=f._value()}n[r]=l}++this._totalResolved>=o&&(null!==s?this._filter(n,s):this._resolve(n))},s.prototype._drainQueue=function(){for(var t=this._queue,e=this._limit,r=this._values;t.length>0&&this._inFlight<e;){if(this._isResolved())return;var n=t.pop();this._promiseFulfilled(r[n],n)}},s.prototype._filter=function(t,e){for(var r=e.length,n=new Array(r),i=0,o=0;o<r;++o)t[o]&&(n[i++]=e[o]);n.length=i,this._resolve(n)},s.prototype.preservedValues=function(){return this._preservedValues},e.prototype.map=function(t,e){return"function"!=typeof t?n("fn must be a function\n\n    See http://goo.gl/916lJJ\n"):u(this,t,e,null).promise()},e.map=function(t,e,r,i){return"function"!=typeof e?n("fn must be a function\n\n    See http://goo.gl/916lJJ\n"):u(t,e,r,i).promise()}}},{"./async.js":2,"./util.js":38}],20:[function(t,e,r){"use strict";e.exports=function(e,r,n,i){var o=t("./util.js"),s=o.tryCatch;e.method=function(t){if("function"!=typeof t)throw new e.TypeError("fn must be a function\n\n    See http://goo.gl/916lJJ\n");return function(){var n=new e(r);n._captureStackTrace(),n._pushContext();var i=s(t).apply(this,arguments);return n._popContext(),n._resolveFromSyncValue(i),n}},e.attempt=e.try=function(t,n,a){if("function"!=typeof t)return i("fn must be a function\n\n    See http://goo.gl/916lJJ\n");var u=new e(r);u._captureStackTrace(),u._pushContext();var c=o.isArray(n)?s(t).apply(a,n):s(t).call(a,n);return u._popContext(),u._resolveFromSyncValue(c),u},e.prototype._resolveFromSyncValue=function(t){t===o.errorObj?this._rejectCallback(t.e,!1,!0):this._resolveCallback(t,!0)}}},{"./util.js":38}],21:[function(t,e,r){"use strict";e.exports=function(e){function r(t,e){var r=this;if(!o.isArray(t))return n.call(r,t,e);var i=a(e).apply(r._boundValue(),[null].concat(t));i===u&&s.throwLater(i.e)}function n(t,e){var r=this._boundValue(),n=void 0===t?a(e).call(r,null):a(e).call(r,null,t);n===u&&s.throwLater(n.e)}function i(t,e){var r=this;if(!t){var n=r._target()._getCarriedStackTrace();n.cause=t,t=n}var i=a(e).call(r._boundValue(),t);i===u&&s.throwLater(i.e)}var o=t("./util.js"),s=t("./async.js"),a=o.tryCatch,u=o.errorObj;e.prototype.asCallback=e.prototype.nodeify=function(t,e){if("function"==typeof t){var o=n;void 0!==e&&Object(e).spread&&(o=r),this._then(o,i,void 0,this,t)}return this}}},{"./async.js":2,"./util.js":38}],22:[function(t,e,r){"use strict";e.exports=function(e,r){var n=t("./util.js"),i=t("./async.js"),o=n.tryCatch,s=n.errorObj;e.prototype.progressed=function(t){return this._then(void 0,void 0,t,void 0,void 0)},e.prototype._progress=function(t){this._isFollowingOrFulfilledOrRejected()||this._target()._progressUnchecked(t)},e.prototype._progressHandlerAt=function(t){return 0===t?this._progressHandler0:this[(t<<2)+t-5+2]},e.prototype._doProgressWith=function(t){var r=t.value,i=t.handler,a=t.promise,u=t.receiver,c=o(i).call(u,r);if(c===s){if(null!=c.e&&"StopProgressPropagation"!==c.e.name){var l=n.canAttachTrace(c.e)?c.e:new Error(n.toString(c.e));a._attachExtraTrace(l),a._progress(c.e)}}else c instanceof e?c._then(a._progress,null,null,a,void 0):a._progress(c)},e.prototype._progressUnchecked=function(t){for(var n=this._length(),o=this._progress,s=0;s<n;s++){var a=this._progressHandlerAt(s),u=this._promiseAt(s);if(u instanceof e)"function"==typeof a?i.invoke(this._doProgressWith,this,{handler:a,promise:u,receiver:this._receiverAt(s),value:t}):i.invoke(o,u,t);else{var c=this._receiverAt(s);"function"==typeof a?a.call(c,t,u):c instanceof r&&!c._isResolved()&&c._promiseProgressed(t,u)}}}}},{"./async.js":2,"./util.js":38}],23:[function(e,r,n){"use strict";r.exports=function(){function n(t){if("function"!=typeof t)throw new p("the promise constructor requires a resolver function\n\n    See http://goo.gl/EC22Yn\n");if(this.constructor!==n)throw new p("the promise constructor cannot be invoked directly\n\n    See http://goo.gl/KsIlge\n");this._bitField=0,this._fulfillmentHandler0=void 0,this._rejectionHandler0=void 0,this._progressHandler0=void 0,this._promise0=void 0,this._receiver0=void 0,this._settledValue=void 0,t!==d&&this._resolveFromResolver(t)}function i(t){var e=new n(d);e._fulfillmentHandler0=t,e._rejectionHandler0=t,e._progressHandler0=t,e._promise0=t,e._receiver0=t,e._settledValue=t}var o,s=function(){return new p("circular promise resolution chain\n\n    See http://goo.gl/LhFpo0\n")},a=function(){return new n.PromiseInspection(this._target())},u=function(t){return n.reject(new p(t))},c=e("./util.js");o=c.isNode?function(){var e=t.domain;return void 0===e&&(e=null),e}:function(){return null},c.notEnumerableProp(n,"_getDomain",o);var l={},f=e("./async.js"),h=e("./errors.js"),p=n.TypeError=h.TypeError;n.RangeError=h.RangeError,n.CancellationError=h.CancellationError,n.TimeoutError=h.TimeoutError,n.OperationalError=h.OperationalError,n.RejectionError=h.OperationalError,n.AggregateError=h.AggregateError;var d=function(){},_={},v={e:null},y=e("./thenables.js")(n,d),g=e("./promise_array.js")(n,d,y,u),m=e("./captured_trace.js")(),w=e("./debuggability.js")(n,m),b=e("./context.js")(n,m,w),j=e("./catch_filter.js")(v),k=e("./promise_resolver.js"),E=k._nodebackForPromise,x=c.errorObj,C=c.tryCatch;return n.prototype.toString=function(){return"[object Promise]"},n.prototype.caught=n.prototype.catch=function(t){var e=arguments.length;if(e>1){var r,i=new Array(e-1),o=0;for(r=0;r<e-1;++r){var s=arguments[r];if("function"!=typeof s)return n.reject(new p("Catch filter must inherit from Error or be a simple predicate function\n\n    See http://goo.gl/o84o68\n"));i[o++]=s}i.length=o,t=arguments[r];var a=new j(i,t,this);return this._then(void 0,a.doFilter,void 0,a,void 0)}return this._then(void 0,t,void 0,void 0,void 0)},n.prototype.reflect=function(){return this._then(a,a,void 0,this,void 0)},n.prototype.then=function(t,e,r){if(w()&&arguments.length>0&&"function"!=typeof t&&"function"!=typeof e){var n=".then() only accepts functions but was passed: "+c.classString(t);arguments.length>1&&(n+=", "+c.classString(e)),this._warn(n)}return this._then(t,e,r,void 0,void 0)},n.prototype.done=function(t,e,r){this._then(t,e,r,void 0,void 0)._setIsFinal()},n.prototype.spread=function(t,e){return this.all()._then(t,e,void 0,_,void 0)},n.prototype.isCancellable=function(){return!this.isResolved()&&this._cancellable()},n.prototype.toJSON=function(){var t={isFulfilled:!1,isRejected:!1,fulfillmentValue:void 0,rejectionReason:void 0};return this.isFulfilled()?(t.fulfillmentValue=this.value(),t.isFulfilled=!0):this.isRejected()&&(t.rejectionReason=this.reason(),t.isRejected=!0),t},n.prototype.all=function(){return new g(this).promise()},n.prototype.error=function(t){return this.caught(c.originatesFromRejection,t)},n.getNewLibraryCopy=r.exports,n.is=function(t){return t instanceof n},n.fromNode=function(t){var e=new n(d),r=C(t)(E(e));return r===x&&e._rejectCallback(r.e,!0,!0),e},n.all=function(t){return new g(t).promise()},n.defer=n.pending=function(){var t=new n(d);return new k(t)},n.cast=function(t){var e=y(t);if(!(e instanceof n)){var r=e;(e=new n(d))._fulfillUnchecked(r)}return e},n.resolve=n.fulfilled=n.cast,n.reject=n.rejected=function(t){var e=new n(d);return e._captureStackTrace(),e._rejectCallback(t,!0),e},n.setScheduler=function(t){if("function"!=typeof t)throw new p("fn must be a function\n\n    See http://goo.gl/916lJJ\n");var e=f._schedule;return f._schedule=t,e},n.prototype._then=function(t,e,r,i,s){var a=void 0!==s,u=a?s:new n(d);a||(u._propagateFrom(this,5),u._captureStackTrace());var c=this._target();c!==this&&(void 0===i&&(i=this._boundTo),a||u._setIsMigrated());var l=c._addCallbacks(t,e,r,u,i,o());return c._isResolved()&&!c._isSettlePromisesQueued()&&f.invoke(c._settlePromiseAtPostResolution,c,l),u},n.prototype._settlePromiseAtPostResolution=function(t){this._isRejectionUnhandled()&&this._unsetRejectionIsUnhandled(),this._settlePromiseAt(t)},n.prototype._length=function(){return 131071&this._bitField},n.prototype._isFollowingOrFulfilledOrRejected=function(){return(939524096&this._bitField)>0},n.prototype._isFollowing=function(){return 536870912==(536870912&this._bitField)},n.prototype._setLength=function(t){this._bitField=-131072&this._bitField|131071&t},n.prototype._setFulfilled=function(){this._bitField=268435456|this._bitField},n.prototype._setRejected=function(){this._bitField=134217728|this._bitField},n.prototype._setFollowing=function(){this._bitField=536870912|this._bitField},n.prototype._setIsFinal=function(){this._bitField=33554432|this._bitField},n.prototype._isFinal=function(){return(33554432&this._bitField)>0},n.prototype._cancellable=function(){return(67108864&this._bitField)>0},n.prototype._setCancellable=function(){this._bitField=67108864|this._bitField},n.prototype._unsetCancellable=function(){this._bitField=-67108865&this._bitField},n.prototype._setIsMigrated=function(){this._bitField=4194304|this._bitField},n.prototype._unsetIsMigrated=function(){this._bitField=-4194305&this._bitField},n.prototype._isMigrated=function(){return(4194304&this._bitField)>0},n.prototype._receiverAt=function(t){var e=0===t?this._receiver0:this[5*t-5+4];if(e!==l)return void 0===e&&this._isBound()?this._boundValue():e},n.prototype._promiseAt=function(t){return 0===t?this._promise0:this[5*t-5+3]},n.prototype._fulfillmentHandlerAt=function(t){return 0===t?this._fulfillmentHandler0:this[5*t-5+0]},n.prototype._rejectionHandlerAt=function(t){return 0===t?this._rejectionHandler0:this[5*t-5+1]},n.prototype._boundValue=function(){var t=this._boundTo;return void 0!==t&&t instanceof n?t.isFulfilled()?t.value():void 0:t},n.prototype._migrateCallbacks=function(t,e){var r=t._fulfillmentHandlerAt(e),i=t._rejectionHandlerAt(e),o=t._progressHandlerAt(e),s=t._promiseAt(e),a=t._receiverAt(e);s instanceof n&&s._setIsMigrated(),void 0===a&&(a=l),this._addCallbacks(r,i,o,s,a,null)},n.prototype._addCallbacks=function(t,e,r,n,i,o){var s=this._length();if(s>=131066&&(s=0,this._setLength(0)),0===s)this._promise0=n,void 0!==i&&(this._receiver0=i),"function"!=typeof t||this._isCarryingStackTrace()||(this._fulfillmentHandler0=null===o?t:o.bind(t)),"function"==typeof e&&(this._rejectionHandler0=null===o?e:o.bind(e)),"function"==typeof r&&(this._progressHandler0=null===o?r:o.bind(r));else{var a=5*s-5;this[a+3]=n,this[a+4]=i,"function"==typeof t&&(this[a+0]=null===o?t:o.bind(t)),"function"==typeof e&&(this[a+1]=null===o?e:o.bind(e)),"function"==typeof r&&(this[a+2]=null===o?r:o.bind(r))}return this._setLength(s+1),s},n.prototype._setProxyHandlers=function(t,e){var r=this._length();if(r>=131066&&(r=0,this._setLength(0)),0===r)this._promise0=e,this._receiver0=t;else{var n=5*r-5;this[n+3]=e,this[n+4]=t}this._setLength(r+1)},n.prototype._proxyPromiseArray=function(t,e){this._setProxyHandlers(t,e)},n.prototype._resolveCallback=function(t,e){if(!this._isFollowingOrFulfilledOrRejected()){if(t===this)return this._rejectCallback(s(),!1,!0);var r=y(t,this);if(!(r instanceof n))return this._fulfill(t);var i=1|(e?4:0);this._propagateFrom(r,i);var o=r._target();if(o._isPending()){for(var a=this._length(),u=0;u<a;++u)o._migrateCallbacks(this,u);this._setFollowing(),this._setLength(0),this._setFollowee(o)}else o._isFulfilled()?this._fulfillUnchecked(o._value()):this._rejectUnchecked(o._reason(),o._getCarriedStackTrace())}},n.prototype._rejectCallback=function(t,e,r){r||c.markAsOriginatingFromRejection(t);var n=c.ensureErrorObject(t),i=n===t;this._attachExtraTrace(n,!!e&&i),this._reject(t,i?void 0:n)},n.prototype._resolveFromResolver=function(t){var e=this;this._captureStackTrace(),this._pushContext();var r=!0,n=C(t)(function(t){null!==e&&(e._resolveCallback(t),e=null)},function(t){null!==e&&(e._rejectCallback(t,r),e=null)});r=!1,this._popContext(),void 0!==n&&n===x&&null!==e&&(e._rejectCallback(n.e,!0,!0),e=null)},n.prototype._settlePromiseFromHandler=function(t,e,r,n){if(!n._isRejected()){n._pushContext();var i;if(i=e!==_||this._isRejected()?C(t).call(e,r):C(t).apply(this._boundValue(),r),n._popContext(),i===x||i===n||i===v){var o=i===n?s():i.e;n._rejectCallback(o,!1,!0)}else n._resolveCallback(i)}},n.prototype._target=function(){for(var t=this;t._isFollowing();)t=t._followee();return t},n.prototype._followee=function(){return this._rejectionHandler0},n.prototype._setFollowee=function(t){this._rejectionHandler0=t},n.prototype._cleanValues=function(){this._cancellable()&&(this._cancellationParent=void 0)},n.prototype._propagateFrom=function(t,e){(1&e)>0&&t._cancellable()&&(this._setCancellable(),this._cancellationParent=t),(4&e)>0&&t._isBound()&&this._setBoundTo(t._boundTo)},n.prototype._fulfill=function(t){this._isFollowingOrFulfilledOrRejected()||this._fulfillUnchecked(t)},n.prototype._reject=function(t,e){this._isFollowingOrFulfilledOrRejected()||this._rejectUnchecked(t,e)},n.prototype._settlePromiseAt=function(t){var e=this._promiseAt(t),r=e instanceof n;if(r&&e._isMigrated())return e._unsetIsMigrated(),f.invoke(this._settlePromiseAt,this,t);var i=this._isFulfilled()?this._fulfillmentHandlerAt(t):this._rejectionHandlerAt(t),o=this._isCarryingStackTrace()?this._getCarriedStackTrace():void 0,s=this._settledValue,a=this._receiverAt(t);this._clearCallbackDataAtIndex(t),"function"==typeof i?r?this._settlePromiseFromHandler(i,a,s,e):i.call(a,s,e):a instanceof g?a._isResolved()||(this._isFulfilled()?a._promiseFulfilled(s,e):a._promiseRejected(s,e)):r&&(this._isFulfilled()?e._fulfill(s):e._reject(s,o)),t>=4&&4==(31&t)&&f.invokeLater(this._setLength,this,0)},n.prototype._clearCallbackDataAtIndex=function(t){if(0===t)this._isCarryingStackTrace()||(this._fulfillmentHandler0=void 0),this._rejectionHandler0=this._progressHandler0=this._receiver0=this._promise0=void 0;else{var e=5*t-5;this[e+3]=this[e+4]=this[e+0]=this[e+1]=this[e+2]=void 0}},n.prototype._isSettlePromisesQueued=function(){return-1073741824==(-1073741824&this._bitField)},n.prototype._setSettlePromisesQueued=function(){this._bitField=-1073741824|this._bitField},n.prototype._unsetSettlePromisesQueued=function(){this._bitField=1073741823&this._bitField},n.prototype._queueSettlePromises=function(){f.settlePromises(this),this._setSettlePromisesQueued()},n.prototype._fulfillUnchecked=function(t){if(t===this){var e=s();return this._attachExtraTrace(e),this._rejectUnchecked(e,void 0)}this._setFulfilled(),this._settledValue=t,this._cleanValues(),this._length()>0&&this._queueSettlePromises()},n.prototype._rejectUncheckedCheckError=function(t){var e=c.ensureErrorObject(t);this._rejectUnchecked(t,e===t?void 0:e)},n.prototype._rejectUnchecked=function(t,e){if(t===this){var r=s();return this._attachExtraTrace(r),this._rejectUnchecked(r)}this._setRejected(),this._settledValue=t,this._cleanValues(),this._isFinal()?f.throwLater(function(t){throw"stack"in t&&f.invokeFirst(m.unhandledRejection,void 0,t),t},void 0===e?t:e):(void 0!==e&&e!==t&&this._setCarriedStackTrace(e),this._length()>0?this._queueSettlePromises():this._ensurePossibleRejectionHandled())},n.prototype._settlePromises=function(){this._unsetSettlePromisesQueued();for(var t=this._length(),e=0;e<t;e++)this._settlePromiseAt(e)},c.notEnumerableProp(n,"_makeSelfResolutionError",s),e("./progress.js")(n,g),e("./method.js")(n,d,y,u),e("./bind.js")(n,d,y),e("./finally.js")(n,v,y),e("./direct_resolve.js")(n),e("./synchronous_inspection.js")(n),e("./join.js")(n,g,y,d),n.version="2.11.0",n.Promise=n,e("./map.js")(n,g,u,y,d),e("./cancel.js")(n),e("./using.js")(n,u,y,b),e("./generators.js")(n,u,d,y),e("./nodeify.js")(n),e("./call_get.js")(n),e("./props.js")(n,g,y,u),e("./race.js")(n,d,y,u),e("./reduce.js")(n,g,u,y,d),e("./settle.js")(n,g),e("./some.js")(n,g,u),e("./promisify.js")(n,d),e("./any.js")(n),e("./each.js")(n,d),e("./timers.js")(n,d),e("./filter.js")(n,d),c.toFastProperties(n),c.toFastProperties(n.prototype),i({a:1}),i({b:2}),i({c:3}),i(1),i(function(){}),i(void 0),i(!1),i(new n(d)),m.setBounds(f.firstLineError,c.lastLineError),n}},{"./any.js":1,"./async.js":2,"./bind.js":3,"./call_get.js":5,"./cancel.js":6,"./captured_trace.js":7,"./catch_filter.js":8,"./context.js":9,"./debuggability.js":10,"./direct_resolve.js":11,"./each.js":12,"./errors.js":13,"./filter.js":15,"./finally.js":16,"./generators.js":17,"./join.js":18,"./map.js":19,"./method.js":20,"./nodeify.js":21,"./progress.js":22,"./promise_array.js":24,"./promise_resolver.js":25,"./promisify.js":26,"./props.js":27,"./race.js":29,"./reduce.js":30,"./settle.js":32,"./some.js":33,"./synchronous_inspection.js":34,"./thenables.js":35,"./timers.js":36,"./using.js":37,"./util.js":38}],24:[function(t,e,r){"use strict";e.exports=function(e,r,n,i){function o(t){switch(t){case-2:return[];case-3:return{}}}function s(t){var n,i=this._promise=new e(r);t instanceof e&&(n=t,i._propagateFrom(n,5)),this._values=t,this._length=0,this._totalResolved=0,this._init(void 0,-2)}var a=t("./util.js").isArray;return s.prototype.length=function(){return this._length},s.prototype.promise=function(){return this._promise},s.prototype._init=function t(r,s){var u=n(this._values,this._promise);if(u instanceof e){if(u=u._target(),this._values=u,!u._isFulfilled())return u._isPending()?void u._then(t,this._reject,void 0,this,s):void this._reject(u._reason());if(u=u._value(),!a(u)){var c=new e.TypeError("expecting an array, a promise or a thenable\n\n    See http://goo.gl/s8MMhc\n");return void this.__hardReject__(c)}}else if(!a(u))return void this._promise._reject(i("expecting an array, a promise or a thenable\n\n    See http://goo.gl/s8MMhc\n")._reason());if(0!==u.length){var l=this.getActualLength(u.length);this._length=l,this._values=this.shouldCopyValues()?new Array(l):this._values;for(var f=this._promise,h=0;h<l;++h){var p=this._isResolved(),d=n(u[h],f);d instanceof e?(d=d._target(),p?d._ignoreRejections():d._isPending()?d._proxyPromiseArray(this,h):d._isFulfilled()?this._promiseFulfilled(d._value(),h):this._promiseRejected(d._reason(),h)):p||this._promiseFulfilled(d,h)}}else-5===s?this._resolveEmptyArray():this._resolve(o(s))},s.prototype._isResolved=function(){return null===this._values},s.prototype._resolve=function(t){this._values=null,this._promise._fulfill(t)},s.prototype.__hardReject__=s.prototype._reject=function(t){this._values=null,this._promise._rejectCallback(t,!1,!0)},s.prototype._promiseProgressed=function(t,e){this._promise._progress({index:e,value:t})},s.prototype._promiseFulfilled=function(t,e){this._values[e]=t,++this._totalResolved>=this._length&&this._resolve(this._values)},s.prototype._promiseRejected=function(t,e){this._totalResolved++,this._reject(t)},s.prototype.shouldCopyValues=function(){return!0},s.prototype.getActualLength=function(t){return t},s}},{"./util.js":38}],25:[function(t,e,r){"use strict";function n(t){return t instanceof Error&&p.getPrototypeOf(t)===Error.prototype}function i(t){var e;if(n(t)){(e=new f(t)).name=t.name,e.message=t.message,e.stack=t.stack;for(var r=p.keys(t),i=0;i<r.length;++i){var o=r[i];d.test(o)||(e[o]=t[o])}return e}return a.markAsOriginatingFromRejection(t),t}function o(t){return function(e,r){if(null!==t){if(e){var n=i(u(e));t._attachExtraTrace(n),t._reject(n)}else if(arguments.length>2){for(var o=arguments.length,s=new Array(o-1),a=1;a<o;++a)s[a-1]=arguments[a];t._fulfill(s)}else t._fulfill(r);t=null}}}var s,a=t("./util.js"),u=a.maybeWrapAsError,c=t("./errors.js"),l=c.TimeoutError,f=c.OperationalError,h=a.haveGetters,p=t("./es5.js"),d=/^(?:name|message|stack|cause)$/;if(s=h?function(t){this.promise=t}:function(t){this.promise=t,this.asCallback=o(t),this.callback=this.asCallback},h){var _={get:function(){return o(this.promise)}};p.defineProperty(s.prototype,"asCallback",_),p.defineProperty(s.prototype,"callback",_)}s._nodebackForPromise=o,s.prototype.toString=function(){return"[object PromiseResolver]"},s.prototype.resolve=s.prototype.fulfill=function(t){if(!(this instanceof s))throw new TypeError("Illegal invocation, resolver resolve/reject must be called within a resolver context. Consider using the promise constructor instead.\n\n    See http://goo.gl/sdkXL9\n");this.promise._resolveCallback(t)},s.prototype.reject=function(t){if(!(this instanceof s))throw new TypeError("Illegal invocation, resolver resolve/reject must be called within a resolver context. Consider using the promise constructor instead.\n\n    See http://goo.gl/sdkXL9\n");this.promise._rejectCallback(t)},s.prototype.progress=function(t){if(!(this instanceof s))throw new TypeError("Illegal invocation, resolver resolve/reject must be called within a resolver context. Consider using the promise constructor instead.\n\n    See http://goo.gl/sdkXL9\n");this.promise._progress(t)},s.prototype.cancel=function(t){this.promise.cancel(t)},s.prototype.timeout=function(){this.reject(new l("timeout"))},s.prototype.isResolved=function(){return this.promise.isResolved()},s.prototype.toJSON=function(){return this.promise.toJSON()},e.exports=s},{"./errors.js":13,"./es5.js":14,"./util.js":38}],26:[function(t,e,r){"use strict";e.exports=function(e,r){function n(t){return!m.test(t)}function i(t){try{return!0===t.__isPromisified__}catch(t){return!1}}function o(t,e,r){var n=f.getDataPropertyOrDefault(t,e+r,y);return!!n&&i(n)}function s(t,e,r){for(var n=0;n<t.length;n+=2){var i=t[n];if(r.test(i))for(var o=i.replace(r,""),s=0;s<t.length;s+=2)if(t[s]===o)throw new v("Cannot promisify an API that has normal methods with '%s'-suffix\n\n    See http://goo.gl/iWrZbw\n".replace("%s",e))}}function a(t,e,r,n){for(var a=f.inheritedDataKeys(t),u=[],c=0;c<a.length;++c){var l=a[c],h=t[l],p=n===w||w(l,h,t);"function"!=typeof h||i(h)||o(t,l,e)||!n(l,h,t,p)||u.push(l,h)}return s(u,e,r),u}function u(t,e,r,n){for(var i=new RegExp(b(e)+"$"),o=a(t,e,i,r),s=0,u=o.length;s<u;s+=2){var c=o[s],h=o[s+1],p=c+e;if(n===j)t[p]=j(c,l,c,h,e);else{var d=n(h,function(){return j(c,l,c,h,e)});f.notEnumerableProp(d,"__isPromisified__",!0),t[p]=d}}return f.toFastProperties(t),t}function c(t,e){return j(t,e,void 0,t)}var l={},f=t("./util.js"),h=t("./promise_resolver.js")._nodebackForPromise,p=f.withAppended,d=f.maybeWrapAsError,_=f.canEvaluate,v=t("./errors").TypeError,y={__isPromisified__:!0},g=["arity","length","name","arguments","caller","callee","prototype","__isPromisified__"],m=new RegExp("^(?:"+g.join("|")+")$"),w=function(t){return f.isIdentifier(t)&&"_"!==t.charAt(0)&&"constructor"!==t},b=function(t){return t.replace(/([$])/,"\\$")},j=_?void 0:function(t,n,i,o){function s(){var i=n;n===l&&(i=this);var o=new e(r);o._captureStackTrace();var s="string"==typeof u&&this!==a?this[u]:t,c=h(o);try{s.apply(i,p(arguments,c))}catch(t){o._rejectCallback(d(t),!0,!0)}return o}var a=function(){return this}(),u=t;return"string"==typeof u&&(t=o),f.notEnumerableProp(s,"__isPromisified__",!0),s};e.promisify=function(t,e){if("function"!=typeof t)throw new v("fn must be a function\n\n    See http://goo.gl/916lJJ\n");if(i(t))return t;var r=c(t,arguments.length<2?l:e);return f.copyDescriptors(t,r,n),r},e.promisifyAll=function(t,e){if("function"!=typeof t&&"object"!=typeof t)throw new v("the target of promisifyAll must be an object or a function\n\n    See http://goo.gl/9ITlV0\n");var r=(e=Object(e)).suffix;"string"!=typeof r&&(r="Async");var n=e.filter;"function"!=typeof n&&(n=w);var i=e.promisifier;if("function"!=typeof i&&(i=j),!f.isIdentifier(r))throw new RangeError("suffix must be a valid identifier\n\n    See http://goo.gl/8FZo5V\n");for(var o=f.inheritedDataKeys(t),s=0;s<o.length;++s){var a=t[o[s]];"constructor"!==o[s]&&f.isClass(a)&&(u(a.prototype,r,n,i),u(a,r,n,i))}return u(t,r,n,i)}}},{"./errors":13,"./promise_resolver.js":25,"./util.js":38}],27:[function(t,e,r){"use strict";e.exports=function(e,r,n,i){function o(t){for(var e=c.keys(t),r=e.length,n=new Array(2*r),i=0;i<r;++i){var o=e[i];n[i]=t[o],n[i+r]=o}this.constructor$(n)}function s(t){var r,s=n(t);return u(s)?(r=s instanceof e?s._then(e.props,void 0,void 0,void 0,void 0):new o(s).promise(),s instanceof e&&r._propagateFrom(s,4),r):i("cannot await properties of a non-object\n\n    See http://goo.gl/OsFKC8\n")}var a=t("./util.js"),u=a.isObject,c=t("./es5.js");a.inherits(o,r),o.prototype._init=function(){this._init$(void 0,-3)},o.prototype._promiseFulfilled=function(t,e){if(this._values[e]=t,++this._totalResolved>=this._length){for(var r={},n=this.length(),i=0,o=this.length();i<o;++i)r[this._values[i+n]]=this._values[i];this._resolve(r)}},o.prototype._promiseProgressed=function(t,e){this._promise._progress({key:this._values[e+this.length()],value:t})},o.prototype.shouldCopyValues=function(){return!1},o.prototype.getActualLength=function(t){return t>>1},e.prototype.props=function(){return s(this)},e.props=function(t){return s(t)}}},{"./es5.js":14,"./util.js":38}],28:[function(t,e,r){"use strict";function n(t,e,r,n,i){for(var o=0;o<i;++o)r[o+n]=t[o+e],t[o+e]=void 0}function i(t){this._capacity=t,this._length=0,this._front=0}i.prototype._willBeOverCapacity=function(t){return this._capacity<t},i.prototype._pushOne=function(t){var e=this.length();this._checkCapacity(e+1),this[this._front+e&this._capacity-1]=t,this._length=e+1},i.prototype._unshiftOne=function(t){var e=this._capacity;this._checkCapacity(this.length()+1);var r=(this._front-1&e-1^e)-e;this[r]=t,this._front=r,this._length=this.length()+1},i.prototype.unshift=function(t,e,r){this._unshiftOne(r),this._unshiftOne(e),this._unshiftOne(t)},i.prototype.push=function(t,e,r){var n=this.length()+3;if(this._willBeOverCapacity(n))return this._pushOne(t),this._pushOne(e),void this._pushOne(r);var i=this._front+n-3;this._checkCapacity(n);var o=this._capacity-1;this[i+0&o]=t,this[i+1&o]=e,this[i+2&o]=r,this._length=n},i.prototype.shift=function(){var t=this._front,e=this[t];return this[t]=void 0,this._front=t+1&this._capacity-1,this._length--,e},i.prototype.length=function(){return this._length},i.prototype._checkCapacity=function(t){this._capacity<t&&this._resizeTo(this._capacity<<1)},i.prototype._resizeTo=function(t){var e=this._capacity;this._capacity=t,n(this,0,this,e,this._front+this._length&e-1)},e.exports=i},{}],29:[function(t,e,r){"use strict";e.exports=function(e,r,n,i){function o(t,o){var u=n(t);if(u instanceof e)return a(u);if(!s(t))return i("expecting an array, a promise or a thenable\n\n    See http://goo.gl/s8MMhc\n");var c=new e(r);void 0!==o&&c._propagateFrom(o,5);for(var l=c._fulfill,f=c._reject,h=0,p=t.length;h<p;++h){var d=t[h];(void 0!==d||h in t)&&e.cast(d)._then(l,f,void 0,c,null)}return c}var s=t("./util.js").isArray,a=function(t){return t.then(function(e){return o(e,t)})};e.race=function(t){return o(t,void 0)},e.prototype.race=function(){return o(this,void 0)}}},{"./util.js":38}],30:[function(t,e,r){"use strict";e.exports=function(e,r,n,i,o){function s(t,r,n,s){this.constructor$(t),this._promise._captureStackTrace(),this._preservedValues=s===o?[]:null,this._zerothIsAccum=void 0===n,this._gotAccum=!1,this._reducingIndex=this._zerothIsAccum?1:0,this._valuesPhase=void 0;var u=i(n,this._promise),f=!1,h=u instanceof e;h&&(u=u._target(),u._isPending()?u._proxyPromiseArray(this,-1):u._isFulfilled()?(n=u._value(),this._gotAccum=!0):(this._reject(u._reason()),f=!0)),h||this._zerothIsAccum||(this._gotAccum=!0);var p=c();this._callback=null===p?r:p.bind(r),this._accum=n,f||l.invoke(a,this,void 0)}function a(){this._init$(void 0,-5)}function u(t,e,r,i){return"function"!=typeof e?n("fn must be a function\n\n    See http://goo.gl/916lJJ\n"):new s(t,e,r,i).promise()}var c=e._getDomain,l=t("./async.js"),f=t("./util.js"),h=f.tryCatch,p=f.errorObj;f.inherits(s,r),s.prototype._init=function(){},s.prototype._resolveEmptyArray=function(){(this._gotAccum||this._zerothIsAccum)&&this._resolve(null!==this._preservedValues?[]:this._accum)},s.prototype._promiseFulfilled=function(t,r){var n=this._values;n[r]=t;var o,s=this.length(),a=this._preservedValues,u=null!==a,c=this._gotAccum,l=this._valuesPhase;if(!l)for(l=this._valuesPhase=new Array(s),o=0;o<s;++o)l[o]=0;if(o=l[r],0===r&&this._zerothIsAccum?(this._accum=t,this._gotAccum=c=!0,l[r]=0===o?1:2):-1===r?(this._accum=t,this._gotAccum=c=!0):0===o?l[r]=1:(l[r]=2,this._accum=t),c){for(var f,d=this._callback,_=this._promise._boundValue(),v=this._reducingIndex;v<s;++v)if(2!==(o=l[v])){if(1!==o)return;if(t=n[v],this._promise._pushContext(),u?(a.push(t),f=h(d).call(_,t,v,s)):f=h(d).call(_,this._accum,t,v,s),this._promise._popContext(),f===p)return this._reject(f.e);var y=i(f,this._promise);if(y instanceof e){if((y=y._target())._isPending())return l[v]=4,y._proxyPromiseArray(this,v);if(!y._isFulfilled())return this._reject(y._reason());f=y._value()}this._reducingIndex=v+1,this._accum=f}else this._reducingIndex=v+1;this._resolve(u?a:this._accum)}},e.prototype.reduce=function(t,e){return u(this,t,e,null)},e.reduce=function(t,e,r,n){return u(t,e,r,n)}}},{"./async.js":2,"./util.js":38}],31:[function(e,r,i){"use strict";var o,s=e("./util");if(s.isNode&&"undefined"==typeof MutationObserver){var a=n.setImmediate,u=t.nextTick;o=s.isRecentNode?function(t){a.call(n,t)}:function(e){u.call(t,e)}}else"undefined"==typeof MutationObserver||"undefined"!=typeof window&&window.navigator&&window.navigator.standalone?o="undefined"!=typeof setImmediate?function(t){setImmediate(t)}:"undefined"!=typeof setTimeout?function(t){setTimeout(t,0)}:function(){throw new Error("No async scheduler available\n\n    See http://goo.gl/m3OTXk\n")}:(o=function(t){var e=document.createElement("div");return new MutationObserver(t).observe(e,{attributes:!0}),function(){e.classList.toggle("foo")}},o.isStatic=!0);r.exports=o},{"./util":38}],32:[function(t,e,r){"use strict";e.exports=function(e,r){function n(t){this.constructor$(t)}var i=e.PromiseInspection;t("./util.js").inherits(n,r),n.prototype._promiseResolved=function(t,e){this._values[t]=e,++this._totalResolved>=this._length&&this._resolve(this._values)},n.prototype._promiseFulfilled=function(t,e){var r=new i;r._bitField=268435456,r._settledValue=t,this._promiseResolved(e,r)},n.prototype._promiseRejected=function(t,e){var r=new i;r._bitField=134217728,r._settledValue=t,this._promiseResolved(e,r)},e.settle=function(t){return new n(t).promise()},e.prototype.settle=function(){return new n(this).promise()}}},{"./util.js":38}],33:[function(t,e,r){"use strict";e.exports=function(e,r,n){function i(t){this.constructor$(t),this._howMany=0,this._unwrap=!1,this._initialized=!1}function o(t,e){if((0|e)!==e||e<0)return n("expecting a positive integer\n\n    See http://goo.gl/1wAmHx\n");var r=new i(t),o=r.promise();return r.setHowMany(e),r.init(),o}var s=t("./util.js"),a=t("./errors.js").RangeError,u=t("./errors.js").AggregateError,c=s.isArray;s.inherits(i,r),i.prototype._init=function(){if(this._initialized){if(0===this._howMany)return void this._resolve([]);this._init$(void 0,-5);var t=c(this._values);!this._isResolved()&&t&&this._howMany>this._canPossiblyFulfill()&&this._reject(this._getRangeError(this.length()))}},i.prototype.init=function(){this._initialized=!0,this._init()},i.prototype.setUnwrap=function(){this._unwrap=!0},i.prototype.howMany=function(){return this._howMany},i.prototype.setHowMany=function(t){this._howMany=t},i.prototype._promiseFulfilled=function(t){this._addFulfilled(t),this._fulfilled()===this.howMany()&&(this._values.length=this.howMany(),1===this.howMany()&&this._unwrap?this._resolve(this._values[0]):this._resolve(this._values))},i.prototype._promiseRejected=function(t){if(this._addRejected(t),this.howMany()>this._canPossiblyFulfill()){for(var e=new u,r=this.length();r<this._values.length;++r)e.push(this._values[r]);this._reject(e)}},i.prototype._fulfilled=function(){return this._totalResolved},i.prototype._rejected=function(){return this._values.length-this.length()},i.prototype._addRejected=function(t){this._values.push(t)},i.prototype._addFulfilled=function(t){this._values[this._totalResolved++]=t},i.prototype._canPossiblyFulfill=function(){return this.length()-this._rejected()},i.prototype._getRangeError=function(t){var e="Input array must contain at least "+this._howMany+" items but contains only "+t+" items";return new a(e)},i.prototype._resolveEmptyArray=function(){this._reject(this._getRangeError(0))},e.some=function(t,e){return o(t,e)},e.prototype.some=function(t){return o(this,t)},e._SomePromiseArray=i}},{"./errors.js":13,"./util.js":38}],34:[function(t,e,r){"use strict";e.exports=function(t){function e(t){void 0!==t?(t=t._target(),this._bitField=t._bitField,this._settledValue=t._settledValue):(this._bitField=0,this._settledValue=void 0)}e.prototype.value=function(){if(!this.isFulfilled())throw new TypeError("cannot get fulfillment value of a non-fulfilled promise\n\n    See http://goo.gl/hc1DLj\n");return this._settledValue},e.prototype.error=e.prototype.reason=function(){if(!this.isRejected())throw new TypeError("cannot get rejection reason of a non-rejected promise\n\n    See http://goo.gl/hPuiwB\n");return this._settledValue},e.prototype.isFulfilled=t.prototype._isFulfilled=function(){return(268435456&this._bitField)>0},e.prototype.isRejected=t.prototype._isRejected=function(){return(134217728&this._bitField)>0},e.prototype.isPending=t.prototype._isPending=function(){return 0==(402653184&this._bitField)},e.prototype.isResolved=t.prototype._isResolved=function(){return(402653184&this._bitField)>0},t.prototype.isPending=function(){return this._target()._isPending()},t.prototype.isRejected=function(){return this._target()._isRejected()},t.prototype.isFulfilled=function(){return this._target()._isFulfilled()},t.prototype.isResolved=function(){return this._target()._isResolved()},t.prototype._value=function(){return this._settledValue},t.prototype._reason=function(){return this._unsetRejectionIsUnhandled(),this._settledValue},t.prototype.value=function(){var t=this._target();if(!t.isFulfilled())throw new TypeError("cannot get fulfillment value of a non-fulfilled promise\n\n    See http://goo.gl/hc1DLj\n");return t._settledValue},t.prototype.reason=function(){var t=this._target();if(!t.isRejected())throw new TypeError("cannot get rejection reason of a non-rejected promise\n\n    See http://goo.gl/hPuiwB\n");return t._unsetRejectionIsUnhandled(),t._settledValue},t.PromiseInspection=e}},{}],35:[function(t,e,r){"use strict";e.exports=function(e,r){function n(t){return t.then}function i(t){return c.call(t,"_promise0")}function o(t,n,i){var o=new e(r),u=o;i&&i._pushContext(),o._captureStackTrace(),i&&i._popContext();var c=!0,l=s.tryCatch(n).call(t,function(t){o&&(o._resolveCallback(t),o=null)},function(t){o&&(o._rejectCallback(t,c,!0),o=null)},function(t){o&&"function"==typeof o._progress&&o._progress(t)});return c=!1,o&&l===a&&(o._rejectCallback(l.e,!0,!0),o=null),u}var s=t("./util.js"),a=s.errorObj,u=s.isObject,c={}.hasOwnProperty;return function(t,c){if(u(t)){if(t instanceof e)return t;if(i(t))return f=new e(r),t._then(f._fulfillUnchecked,f._rejectUncheckedCheckError,f._progressUnchecked,f,null),f;var l=s.tryCatch(n)(t);if(l===a){c&&c._pushContext();var f=e.reject(l.e);return c&&c._popContext(),f}if("function"==typeof l)return o(t,l,c)}return t}}},{"./util.js":38}],36:[function(t,e,r){"use strict";e.exports=function(e,r){function n(t){var e=this;return e instanceof Number&&(e=+e),clearTimeout(e),t}function i(t){var e=this;throw e instanceof Number&&(e=+e),clearTimeout(e),t}var o=t("./util.js"),s=e.TimeoutError,a=function(t,e){if(t.isPending()){var r;!o.isPrimitive(e)&&e instanceof Error?r=e:("string"!=typeof e&&(e="operation timed out"),r=new s(e)),o.markAsOriginatingFromRejection(r),t._attachExtraTrace(r),t._cancel(r)}},u=function(t){return c(+this).thenReturn(t)},c=e.delay=function(t,n){if(void 0===n){n=t,t=void 0;var i=new e(r);return setTimeout(function(){i._fulfill()},n),i}return n=+n,e.resolve(t)._then(u,null,null,n,void 0)};e.prototype.delay=function(t){return c(this,t)},e.prototype.timeout=function(t,e){t=+t;var r=this.then().cancellable();r._cancellationParent=this;var o=setTimeout(function(){a(r,e)},t);return r._then(n,i,void 0,o,void 0)}}},{"./util.js":38}],37:[function(t,e,r){"use strict";e.exports=function(e,r,n,i){function o(t){for(var r=t.length,n=0;n<r;++n){var i=t[n];if(i.isRejected())return e.reject(i.error());t[n]=i._settledValue}return t}function s(t){setTimeout(function(){throw t},0)}function a(t){var e=n(t);return e!==t&&"function"==typeof t._isDisposable&&"function"==typeof t._getDisposer&&t._isDisposable()&&e._setDisposable(t._getDisposer()),e}function u(t,r){function i(){if(o>=u)return c.resolve();var l=a(t[o++]);if(l instanceof e&&l._isDisposable()){try{l=n(l._getDisposer().tryDispose(r),t.promise)}catch(t){return s(t)}if(l instanceof e)return l._then(i,s,null,null,null)}i()}var o=0,u=t.length,c=e.defer();return i(),c.promise}function c(t){var e=new v;return e._settledValue=t,e._bitField=268435456,u(this,e).thenReturn(t)}function l(t){var e=new v;return e._settledValue=t,e._bitField=134217728,u(this,e).thenThrow(t)}function f(t,e,r){this._data=t,this._promise=e,this._context=r}function h(t,e,r){this.constructor$(t,e,r)}function p(t){return f.isDisposer(t)?(this.resources[this.index]._setDisposable(t),t.promise()):t}var d=t("./errors.js").TypeError,_=t("./util.js").inherits,v=e.PromiseInspection;f.prototype.data=function(){return this._data},f.prototype.promise=function(){return this._promise},f.prototype.resource=function(){return this.promise().isFulfilled()?this.promise().value():null},f.prototype.tryDispose=function(t){var e=this.resource(),r=this._context;void 0!==r&&r._pushContext();var n=null!==e?this.doDispose(e,t):null;return void 0!==r&&r._popContext(),this._promise._unsetDisposable(),this._data=null,n},f.isDisposer=function(t){return null!=t&&"function"==typeof t.resource&&"function"==typeof t.tryDispose},_(h,f),h.prototype.doDispose=function(t,e){return this.data().call(t,t,e)},e.using=function(){var t=arguments.length;if(t<2)return r("you must pass at least 2 arguments to Promise.using");var i=arguments[t-1];if("function"!=typeof i)return r("fn must be a function\n\n    See http://goo.gl/916lJJ\n");var s,a=!0;2===t&&Array.isArray(arguments[0])?(s=arguments[0],t=s.length,a=!1):(s=arguments,t--);for(var u=new Array(t),h=0;h<t;++h){var d=s[h];if(f.isDisposer(d)){var _=d;(d=d.promise())._setDisposable(_)}else{var v=n(d);v instanceof e&&(d=v._then(p,null,null,{resources:u,index:h},void 0))}u[h]=d}var y=e.settle(u).then(o).then(function(t){y._pushContext();var e;try{e=a?i.apply(void 0,t):i.call(void 0,t)}finally{y._popContext()}return e})._then(c,l,void 0,u,void 0);return u.promise=y,y},e.prototype._setDisposable=function(t){this._bitField=262144|this._bitField,this._disposer=t},e.prototype._isDisposable=function(){return(262144&this._bitField)>0},e.prototype._getDisposer=function(){return this._disposer},e.prototype._unsetDisposable=function(){this._bitField=-262145&this._bitField,this._disposer=void 0},e.prototype.disposer=function(t){if("function"==typeof t)return new h(t,this,i());throw new d}}},{"./errors.js":13,"./util.js":38}],38:[function(e,r,n){"use strict";function i(){try{var t=l;return l=null,t.apply(this,arguments)}catch(t){return d.e=t,d}}function o(t){return null==t||!0===t||!1===t||"string"==typeof t||"number"==typeof t}function s(t,e,r){if(o(t))return t;var n={value:r,configurable:!0,enumerable:!1,writable:!0};return f.defineProperty(t,e,n),t}function a(t){try{return t+""}catch(t){return"[no string representation]"}}function u(t){return t instanceof Error&&f.propertyIsWritable(t,"stack")}function c(t){return{}.toString.call(t)}var l,f=e("./es5.js"),h="undefined"==typeof navigator,p=function(){try{var t={};return f.defineProperty(t,"f",{get:function(){return 3}}),3===t.f}catch(t){return!1}}(),d={e:{}},_=function(){var t=[Array.prototype,Object.prototype,Function.prototype],e=function(e){for(var r=0;r<t.length;++r)if(t[r]===e)return!0;return!1};if(f.isES5){var r=Object.getOwnPropertyNames;return function(t){for(var n=[],i=Object.create(null);null!=t&&!e(t);){var o;try{o=r(t)}catch(t){return n}for(var s=0;s<o.length;++s){var a=o[s];if(!i[a]){i[a]=!0;var u=Object.getOwnPropertyDescriptor(t,a);null!=u&&null==u.get&&null==u.set&&n.push(a)}}t=f.getPrototypeOf(t)}return n}}var n={}.hasOwnProperty;return function(r){if(e(r))return[];var i=[];t:for(var o in r)if(n.call(r,o))i.push(o);else{for(var s=0;s<t.length;++s)if(n.call(t[s],o))continue t;i.push(o)}return i}}(),v=/this\s*\.\s*\S+\s*=/,y=/^[a-z$_][a-z$_0-9]*$/i,g="stack"in new Error?function(t){return u(t)?t:new Error(a(t))}:function(t){if(u(t))return t;try{throw new Error(a(t))}catch(t){return t}},m={isClass:function(t){try{if("function"==typeof t){var e=f.names(t.prototype),r=f.isES5&&e.length>1,n=e.length>0&&!(1===e.length&&"constructor"===e[0]),i=v.test(t+"")&&f.names(t).length>0;if(r||n||i)return!0}return!1}catch(t){return!1}},isIdentifier:function(t){return y.test(t)},inheritedDataKeys:_,getDataPropertyOrDefault:function(t,e,r){if(!f.isES5)return{}.hasOwnProperty.call(t,e)?t[e]:void 0;var n=Object.getOwnPropertyDescriptor(t,e);return null!=n?null==n.get&&null==n.set?n.value:r:void 0},thrower:function(t){throw t},isArray:f.isArray,haveGetters:p,notEnumerableProp:s,isPrimitive:o,isObject:function(t){return!o(t)},canEvaluate:h,errorObj:d,tryCatch:function(t){return l=t,i},inherits:function(t,e){function r(){this.constructor=t,this.constructor$=e;for(var r in e.prototype)n.call(e.prototype,r)&&"$"!==r.charAt(r.length-1)&&(this[r+"$"]=e.prototype[r])}var n={}.hasOwnProperty;return r.prototype=e.prototype,t.prototype=new r,t.prototype},withAppended:function(t,e){var r,n=t.length,i=new Array(n+1);for(r=0;r<n;++r)i[r]=t[r];return i[r]=e,i},maybeWrapAsError:function(t){return o(t)?new Error(a(t)):t},toFastProperties:function(t){function e(){}e.prototype=t;for(var r=8;r--;)new e;return t},filledRange:function(t,e,r){for(var n=new Array(t),i=0;i<t;++i)n[i]=e+i+r;return n},toString:a,canAttachTrace:u,ensureErrorObject:g,originatesFromRejection:function(t){return null!=t&&(t instanceof Error.__BluebirdErrorTypes__.OperationalError||!0===t.isOperational)},markAsOriginatingFromRejection:function(t){try{s(t,"isOperational",!0)}catch(t){}},classString:c,copyDescriptors:function(t,e,r){for(var n=f.names(t),i=0;i<n.length;++i){var o=n[i];if(r(o))try{f.defineProperty(e,o,f.getDescriptor(t,o))}catch(t){}}},hasDevTools:"undefined"!=typeof chrome&&chrome&&"function"==typeof chrome.loadTimes,isNode:void 0!==t&&"[object process]"===c(t).toLowerCase()};m.isRecentNode=m.isNode&&function(){var e=t.versions.node.split(".").map(Number);return 0===e[0]&&e[1]>10||e[0]>0}(),m.isNode&&m.toFastProperties(t);try{throw new Error}catch(e){m.lastLineError=e}r.exports=m},{"./es5.js":14}]},{},[4])(4)}),"undefined"!=typeof window&&null!==window?window.P=window.Promise:"undefined"!=typeof self&&null!==self&&(self.P=self.Promise)}).call(this,t("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{_process:25}],23:[function(t,e,r){var n=Object.prototype.hasOwnProperty,i=function(t,e){function r(){this.constructor=t}for(var i in e)n.call(e,i)&&(t[i]=e[i]);r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype},o=function(t){return function(e){for(var r=Array.prototype.slice.call(arguments,1),i=0;i<r.length;i++){var o=r[i];for(var s in o)n.call(o,s)&&t(e,s,o)&&(e[s]=o[s])}return e}},s=o(function(){return!0}),a=o(function(t,e){return void 0===t[e]});e.exports=function(t,e,r){function o(t,r){if(!(this instanceof o)){var n=new o(t,r);return null!=Error.captureStackTrace&&Error.captureStackTrace(n,arguments.callee),n}Error.call(this),null!=Error.captureStackTrace&&Error.captureStackTrace(this,arguments.callee),this.message=t,a(this,r,e);var i=this.message||t;delete this.message,Object.defineProperty(this,"message",{get:function(){return this.getMessage(i)},set:function(t){i=t}})}return null==r&&(r=Error),i(o,r),o.prototype.name=t,o.prototype.getMessage=function(t){return t},o.prototype.toObject=function(){var t={};for(var e in this)n.call(this,e)&&(t[e]=this[e]);return t},o.prototype.toJSON=function(){return s({message:this.message},this.toObject())},o}},{}],24:[function(t,e,r){(function(t){function r(t,e){return null==t?void 0:t[e]}function n(t){var e=!1;if(null!=t&&"function"!=typeof t.toString)try{e=!!(t+"")}catch(t){}return e}function i(t){var e=-1,r=t?t.length:0;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function o(t){var e=-1,r=t?t.length:0;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function s(t){var e=-1,r=t?t.length:0;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function a(t,e){for(var r=t.length;r--;)if(j(t[r][0],e))return r;return-1}function u(t,e){return null!=t&&nt.call(t,e)}function c(t){return!(!T(t)||g(t))&&(C(t)||n(t)?ot:$).test(w(t))}function l(t){if("string"==typeof t)return t;if(O(t))return ht?ht.call(t):"";var e=t+"";return"0"==e&&1/t==-L?"-0":e}function f(t){return dt(t)?t:pt(t)}function h(t,e){var r=t.__data__;return y(e)?r["string"==typeof e?"string":"hash"]:r.map}function p(t,e){var n=r(t,e);return c(n)?n:void 0}function d(t,e,r){for(var n,i=-1,o=(e=v(e,t)?[e]:f(e)).length;++i<o;){var s=m(e[i]);if(!(n=null!=t&&r(t,s)))break;t=t[s]}return n||!!(o=t?t.length:0)&&S(o)&&_(s,o)&&(dt(t)||k(t))}function _(t,e){return!!(e=null==e?I:e)&&("number"==typeof t||Q.test(t))&&t>-1&&t%1==0&&t<e}function v(t,e){if(dt(t))return!1;var r=typeof t;return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=t&&!O(t))||D.test(t)||!M.test(t)||null!=e&&t in Object(e)}function y(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}function g(t){return!!et&&et in t}function m(t){if("string"==typeof t||O(t))return t;var e=t+"";return"0"==e&&1/t==-L?"-0":e}function w(t){if(null!=t){try{return rt.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function b(t,e){if("function"!=typeof t||e&&"function"!=typeof e)throw new TypeError(P);var r=function(){var n=arguments,i=e?e.apply(this,n):n[0],o=r.cache;if(o.has(i))return o.get(i);var s=t.apply(this,n);return r.cache=o.set(i,s),s};return r.cache=new(b.Cache||s),r}function j(t,e){return t===e||t!==t&&e!==e}function k(t){return x(t)&&nt.call(t,"callee")&&(!at.call(t,"callee")||it.call(t)==U)}function E(t){return null!=t&&S(t.length)&&!C(t)}function x(t){return A(t)&&E(t)}function C(t){var e=T(t)?it.call(t):"";return e==H||e==z}function S(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=I}function T(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function A(t){return!!t&&"object"==typeof t}function O(t){return"symbol"==typeof t||A(t)&&it.call(t)==N}function F(t){return null==t?"":l(t)}var P="Expected a function",R="__lodash_hash_undefined__",L=1/0,I=9007199254740991,U="[object Arguments]",H="[object Function]",z="[object GeneratorFunction]",N="[object Symbol]",M=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,D=/^\w*$/,q=/^\./,V=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,B=/[\\^$.*+?()[\]{}|]/g,W=/\\(\\)?/g,$=/^\[object .+?Constructor\]$/,Q=/^(?:0|[1-9]\d*)$/,J="object"==typeof t&&t&&t.Object===Object&&t,K="object"==typeof self&&self&&self.Object===Object&&self,G=J||K||Function("return this")(),X=Array.prototype,Y=Function.prototype,Z=Object.prototype,tt=G["__core-js_shared__"],et=function(){var t=/[^.]+$/.exec(tt&&tt.keys&&tt.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),rt=Y.toString,nt=Z.hasOwnProperty,it=Z.toString,ot=RegExp("^"+rt.call(nt).replace(B,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),st=G.Symbol,at=Z.propertyIsEnumerable,ut=X.splice,ct=p(G,"Map"),lt=p(Object,"create"),ft=st?st.prototype:void 0,ht=ft?ft.toString:void 0;i.prototype.clear=function(){this.__data__=lt?lt(null):{}},i.prototype.delete=function(t){return this.has(t)&&delete this.__data__[t]},i.prototype.get=function(t){var e=this.__data__;if(lt){var r=e[t];return r===R?void 0:r}return nt.call(e,t)?e[t]:void 0},i.prototype.has=function(t){var e=this.__data__;return lt?void 0!==e[t]:nt.call(e,t)},i.prototype.set=function(t,e){return this.__data__[t]=lt&&void 0===e?R:e,this},o.prototype.clear=function(){this.__data__=[]},o.prototype.delete=function(t){var e=this.__data__,r=a(e,t);return!(r<0||(r==e.length-1?e.pop():ut.call(e,r,1),0))},o.prototype.get=function(t){var e=this.__data__,r=a(e,t);return r<0?void 0:e[r][1]},o.prototype.has=function(t){return a(this.__data__,t)>-1},o.prototype.set=function(t,e){var r=this.__data__,n=a(r,t);return n<0?r.push([t,e]):r[n][1]=e,this},s.prototype.clear=function(){this.__data__={hash:new i,map:new(ct||o),string:new i}},s.prototype.delete=function(t){return h(this,t).delete(t)},s.prototype.get=function(t){return h(this,t).get(t)},s.prototype.has=function(t){return h(this,t).has(t)},s.prototype.set=function(t,e){return h(this,t).set(t,e),this};var pt=b(function(t){t=F(t);var e=[];return q.test(t)&&e.push(""),t.replace(V,function(t,r,n,i){e.push(n?i.replace(W,"$1"):r||t)}),e});b.Cache=s;var dt=Array.isArray;e.exports=function(t,e){return null!=t&&d(t,e,u)}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],25:[function(t,e,r){function n(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}function o(t){if(f===setTimeout)return setTimeout(t,0);if((f===n||!f)&&setTimeout)return f=setTimeout,setTimeout(t,0);try{return f(t,0)}catch(e){try{return f.call(null,t,0)}catch(e){return f.call(this,t,0)}}}function s(t){if(h===clearTimeout)return clearTimeout(t);if((h===i||!h)&&clearTimeout)return h=clearTimeout,clearTimeout(t);try{return h(t)}catch(e){try{return h.call(null,t)}catch(e){return h.call(this,t)}}}function a(){v&&d&&(v=!1,d.length?_=d.concat(_):y=-1,_.length&&u())}function u(){if(!v){var t=o(a);v=!0;for(var e=_.length;e;){for(d=_,_=[];++y<e;)d&&d[y].run();y=-1,e=_.length}d=null,v=!1,s(t)}}function c(t,e){this.fun=t,this.array=e}function l(){}var f,h,p=e.exports={};!function(){try{f="function"==typeof setTimeout?setTimeout:n}catch(t){f=n}try{h="function"==typeof clearTimeout?clearTimeout:i}catch(t){h=i}}();var d,_=[],v=!1,y=-1;p.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)e[r-1]=arguments[r];_.push(new c(t,e)),1!==_.length||v||o(u)},c.prototype.run=function(){this.fun.apply(null,this.array)},p.title="browser",p.browser=!0,p.env={},p.argv=[],p.version="",p.versions={},p.on=l,p.addListener=l,p.once=l,p.off=l,p.removeListener=l,p.removeAllListeners=l,p.emit=l,p.prependListener=l,p.prependOnceListener=l,p.listeners=function(t){return[]},p.binding=function(t){throw new Error("process.binding is not supported")},p.cwd=function(){return"/"},p.chdir=function(t){throw new Error("process.chdir is not supported")},p.umask=function(){return 0}},{}],26:[function(t,e,r){"use strict";function n(t,e,r){return e<=t&&t<=r}function i(t){if(void 0===t)return{};if(t===Object(t))return t;throw TypeError("Could not convert argument to dictionary")}function o(t){for(var e=String(t),r=e.length,n=0,i=[];n<r;){var o=e.charCodeAt(n);if(o<55296||o>57343)i.push(o);else if(56320<=o&&o<=57343)i.push(65533);else if(55296<=o&&o<=56319)if(n===r-1)i.push(65533);else{var s=t.charCodeAt(n+1);if(56320<=s&&s<=57343){var a=1023&o,u=1023&s;i.push(65536+(a<<10)+u),n+=1}else i.push(65533)}n+=1}return i}function s(t){for(var e="",r=0;r<t.length;++r){var n=t[r];n<=65535?e+=String.fromCharCode(n):(n-=65536,e+=String.fromCharCode(55296+(n>>10),56320+(1023&n)))}return e}function a(t){this.tokens=[].slice.call(t)}function u(t,e){if(t)throw TypeError("Decoder error");return e||65533}function c(t,e){if(!(this instanceof c))return new c(t,e);if((t=void 0!==t?String(t).toLowerCase():_)!==_)throw new Error("Encoding not supported. Only utf-8 is supported");e=i(e),this._streaming=!1,this._BOMseen=!1,this._decoder=null,this._fatal=Boolean(e.fatal),this._ignoreBOM=Boolean(e.ignoreBOM),Object.defineProperty(this,"encoding",{value:"utf-8"}),Object.defineProperty(this,"fatal",{value:this._fatal}),Object.defineProperty(this,"ignoreBOM",{value:this._ignoreBOM})}function l(t,e){if(!(this instanceof l))return new l(t,e);if((t=void 0!==t?String(t).toLowerCase():_)!==_)throw new Error("Encoding not supported. Only utf-8 is supported");e=i(e),this._streaming=!1,this._encoder=null,this._options={fatal:Boolean(e.fatal)},Object.defineProperty(this,"encoding",{value:"utf-8"})}function f(t){var e=t.fatal,r=0,i=0,o=0,s=128,a=191;this.handler=function(t,c){if(c===p&&0!==o)return o=0,u(e);if(c===p)return d;if(0===o){if(n(c,0,127))return c;if(n(c,194,223))o=1,r=c-192;else if(n(c,224,239))224===c&&(s=160),237===c&&(a=159),o=2,r=c-224;else{if(!n(c,240,244))return u(e);240===c&&(s=144),244===c&&(a=143),o=3,r=c-240}return r<<=6*o,null}if(!n(c,s,a))return r=o=i=0,s=128,a=191,t.prepend(c),u(e);if(s=128,a=191,i+=1,r+=c-128<<6*(o-i),i!==o)return null;var l=r;return r=o=i=0,l}}function h(t){t.fatal,this.handler=function(t,e){if(e===p)return d;if(n(e,0,127))return e;var r,i;n(e,128,2047)?(r=1,i=192):n(e,2048,65535)?(r=2,i=224):n(e,65536,1114111)&&(r=3,i=240);for(var o=[(e>>6*r)+i];r>0;){var s=e>>6*(r-1);o.push(128|63&s),r-=1}return o}}var p=-1;a.prototype={endOfStream:function(){return!this.tokens.length},read:function(){return this.tokens.length?this.tokens.shift():p},prepend:function(t){if(Array.isArray(t))for(var e=t;e.length;)this.tokens.unshift(e.pop());else this.tokens.unshift(t)},push:function(t){if(Array.isArray(t))for(var e=t;e.length;)this.tokens.push(e.shift());else this.tokens.push(t)}};var d=-1,_="utf-8";c.prototype={decode:function(t,e){var r;r="object"==typeof t&&t instanceof ArrayBuffer?new Uint8Array(t):"object"==typeof t&&"buffer"in t&&t.buffer instanceof ArrayBuffer?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):new Uint8Array(0),e=i(e),this._streaming||(this._decoder=new f({fatal:this._fatal}),this._BOMseen=!1),this._streaming=Boolean(e.stream);for(var n,o=new a(r),u=[];!o.endOfStream()&&(n=this._decoder.handler(o,o.read()))!==d;)null!==n&&(Array.isArray(n)?u.push.apply(u,n):u.push(n));if(!this._streaming){do{if((n=this._decoder.handler(o,o.read()))===d)break;null!==n&&(Array.isArray(n)?u.push.apply(u,n):u.push(n))}while(!o.endOfStream());this._decoder=null}return u.length&&(-1===["utf-8"].indexOf(this.encoding)||this._ignoreBOM||this._BOMseen||(65279===u[0]?(this._BOMseen=!0,u.shift()):this._BOMseen=!0)),s(u)}},l.prototype={encode:function(t,e){t=t?String(t):"",e=i(e),this._streaming||(this._encoder=new h(this._options)),this._streaming=Boolean(e.stream);for(var r,n=[],s=new a(o(t));!s.endOfStream()&&(r=this._encoder.handler(s,s.read()))!==d;)Array.isArray(r)?n.push.apply(n,r):n.push(r);if(!this._streaming){for(;(r=this._encoder.handler(s,s.read()))!==d;)Array.isArray(r)?n.push.apply(n,r):n.push(r);this._encoder=null}return new Uint8Array(n)}},r.TextEncoder=l,r.TextDecoder=c},{}],27:[function(t,e,r){e.exports=function(){for(var t={},e=0;e<arguments.length;e++){var r=arguments[e];for(var i in r)n.call(r,i)&&(t[i]=r[i])}return t};var n=Object.prototype.hasOwnProperty},{}]},{},[2]);